"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[701,212,81],{7296:function(e,t,s){s.d(t,{f:function(){return o}});s(560);var a=s(4870),n=s(167),r=s(6797),i=s.n(r);const o=(0,a.Um)({GroupList:localStorage.getItem("talkGroupList")?JSON.parse(localStorage.getItem("talkGroupList")):[],refreshGroupList(){localStorage.setItem("talkGroupList",JSON.stringify(this.GroupList)),this.GroupList=JSON.parse(localStorage.getItem("talkGroupList"))},MessageList:localStorage.getItem("talkMessageList")?JSON.parse(localStorage.getItem("talkMessageList")):[],refreshMessageList(){localStorage.setItem("talkMessageList",JSON.stringify(this.MessageList)),this.MessageList=JSON.parse(localStorage.getItem("talkMessageList"))},refreshAll(){this.refreshGroupList(),this.refreshMessageList()},MessageTemplate:{index:"",parentGroup:"",owner:"",content:"",update:"",status:!0},GroupTemplate:{index:"",name:"",member:[],message:[],update:"",status:!0},createGroup(e,t){const s={index:this.GroupList.length,name:e,member:t,message:[],update:i()().format("YYYY-MM-DD"),status:!0};this.GroupList.push(s),this.createMessage(s.index,"채팅방이 생성되었습니다"),this.refreshGroupList()},createMessage(e,t){const s={index:this.MessageList.length,parentGroup:e,owner:n.N.currentMember,content:t,update:i()().format("YYYY-MM-DD HH:mm:ss"),status:!0},a=this.findGroupByIndex(e);a.update=s.update,a.message.push(s.index),this.MessageList.push(s),this.refreshAll()},findGroupByIndex(e){return this.GroupList.find((t=>t.index===e))},findMessageByIndex(e){return this.MessageList.find((t=>t.index===e))},findMessageGroupByIndex(e){return this.MessageList.filter((t=>t.parentGroup===e))},findLastMessageByGroupIndex(e){const t=this.findGroupByIndex(e),s=t.message[t.message.length-1];return this.findMessageByIndex(s)},findGroupByMember(e){return this.GroupList.filter((t=>t.member.includes(e)))},getGroupByIndex(e){const t=this.findGroupByIndex(e),s={...t},a=[];return s.member.forEach((e=>{a.push(n.N.findMemberByIndex(e))})),s.member=a,s}})},701:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var a=s(3396),n=s(7139),r=s(9242);const i={class:"headline"};function o(e,t,s,o,u,l){const d=(0,a.up)("el-button"),p=(0,a.up)("el-row"),m=(0,a.up)("TalkTemplate"),c=(0,a.up)("el-scrollbar"),g=(0,a.up)("el-input");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",i,[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"primary",onClick:l.returnToMain},{default:(0,a.w5)((()=>[(0,a.Uk)("목록")])),_:1},8,["onClick"]),(0,a._)("h2",null,(0,n.zw)(u.Title),1)])),_:1})]),(0,a.Wm)(c,{"max-height":"400px"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.MessageData,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.index},[(0,a._)("div",null,[(0,a.Wm)(m,{MessageIndex:e.index,checkChain:l.checkChainMessage(e.index)},null,8,["MessageIndex","checkChain"])])])))),128))])),_:1}),(0,a.Wm)(g,{modelValue:u.content,"onUpdate:modelValue":t[0]||(t[0]=e=>u.content=e),onKeyup:(0,r.D2)(l.sendMessage,["enter"])},{append:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"primary",onClick:l.sendMessage},{default:(0,a.w5)((()=>[(0,a.Uk)("전송")])),_:1},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])}var u=s(7296),l=s(6797),d=s.n(l),p=s(3212),m={name:"ShowTemplate",components:{TalkTemplate:p["default"]},props:{GroupIndex:{type:Number}},computed:{MessageData(){const e=u.f.findMessageGroupByIndex(this.GroupIndex);return Array.isArray(e)?e:[e]}},data(){return{currentTime:d()().format("YYYY-MM-DD HH:mm:ss"),content:"",Title:""}},methods:{pageInit(){this.Title=u.f.findGroupByIndex(this.GroupIndex).name},sendMessage(){u.f.createMessage(this.GroupIndex,this.content),this.content=""},returnToMain(){this.$emit("returnToMain")},checkChainMessage(e){const t=this.MessageData.findIndex((t=>t.index===e));if(console.log(t),0===t)return!1;const s=this.MessageData[t].owner,a=this.MessageData[t-1].owner;return s===a}},mounted(){this.pageInit()}},c=s(89);const g=(0,c.Z)(m,[["render",o]]);var h=g},3212:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var a=s(3396),n=s(7139);const r={key:0},i={class:"message-Box"},o={key:1},u={class:"message-Box"};function l(e,t,s,l,d,p){const m=(0,a.up)("userAvatar"),c=(0,a.up)("el-col"),g=(0,a.up)("el-row");return(0,a.wg)(),(0,a.iD)("div",null,[d.isMine?((0,a.wg)(),(0,a.iD)("div",r,[s.checkChain?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{span:4,offset:20},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{parentMember:p.MessageData.owner},null,8,["parentMember"])])),_:1})])),_:1})),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{span:4,offset:20},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(d.update),1)])),_:1})])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{span:8,offset:16},{default:(0,a.w5)((()=>[(0,a._)("div",i,(0,n.zw)(p.MessageData.content),1)])),_:1})])),_:1})])):((0,a.wg)(),(0,a.iD)("div",o,[s.checkChain?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{span:4},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{parentMember:p.MessageData.owner},null,8,["parentMember"])])),_:1})])),_:1})),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{span:4},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(d.update),1)])),_:1})])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{span:8},{default:(0,a.w5)((()=>[(0,a._)("div",u,(0,n.zw)(p.MessageData.content),1)])),_:1})])),_:1})]))])}var d=s(7296),p=s(167),m=s(2081),c=s(6797),g=s.n(c),h={name:"TalkTemplate",components:{userAvatar:m["default"]},props:{MessageIndex:{type:Number},checkChain:{type:Boolean,default:!1}},computed:{MessageData(){return d.f.findMessageByIndex(this.MessageIndex)}},data(){return{isMine:!1,update:""}},methods:{pageInit(){this.isMine=this.MessageData.owner===p.N.currentMember;const e=g()().format("YYYY-MM-DD HH:mm:ss");g()(this.MessageData.update).isSame(e,"day")?this.update=g()(this.MessageData.update).format("HH:mm:ss"):this.update=g()(this.MessageData.update).format("YYYY-MM-DD")}},mounted(){this.pageInit()}},f=s(89);const M=(0,f.Z)(h,[["render",l]]);var w=M},2081:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var a=s(3396),n=s(7139);const r={class:"nameTab"};function i(e,t,s,i,o,u){const l=(0,a.up)("UserFilled"),d=(0,a.up)("el-icon"),p=(0,a.up)("el-avatar");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(p,{color:o.color,"background-color":o.color},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:o.color,size:o.size},{default:(0,a.w5)((()=>[(0,a.Wm)(l)])),_:1},8,["color","size"])])),_:1},8,["color","background-color"]),(0,a._)("span",r,(0,n.zw)(o.member.name)+"("+(0,n.zw)(o.member.department)+")",1)])}var o=s(2748),u=s(167),l={name:"userAvatar",components:{UserFilled:o.wvC},data(){return{size:"large",member:{},color:""}},props:{parentMember:{type:Number,default:2}},methods:{colorCheck(){switch(this.member.department){case"기획":return"#409EFF";case"개발":return"#67C23A";case"디자인":return"#E6A23C";case"기타":return"#F56C6C";default:return"#909399"}}},mounted(){this.member=u.N.findMemberByIndex(this.parentMember),this.color=this.colorCheck()}},d=s(89);const p=(0,d.Z)(l,[["render",i],["__scopeId","data-v-5cbeb6c0"]]);var m=p}}]);
//# sourceMappingURL=701.19f856c8.js.map