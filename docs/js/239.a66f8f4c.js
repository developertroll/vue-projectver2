"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[239,136,474,455,404],{4702:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=r(3396),o=r(7139);const l={class:"el-header"};function n(e,t,r,n,s,i){const u=(0,a.up)("el-button"),d=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",null,[(0,a.Wm)(u,{type:"primary",onClick:i.openDialog},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(r.title),1)])),_:1},8,["onClick"])]),(0,a.Wm)(d,{modelValue:s.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>s.dialogVisible=e),"append-to-body":"","show-close":!1},{header:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("h2",null,(0,o.zw)(r.title),1),(0,a.Wm)(u,{onClick:i.closeDialog},{default:(0,a.w5)((()=>[(0,a.Uk)("닫기")])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default",{onSaveForm:t[0]||(t[0]=(...e)=>i.saveForm&&i.saveForm(...e))})])),_:3},8,["modelValue"])])}var s={name:"dialogSlot",data(){return{dialogVisible:!1}},props:{title:{type:String,default:""}},methods:{openDialog(){this.dialogVisible=!0},closeDialog(){this.dialogVisible=!1},saveForm(e){this.$emit("saveForm",e),this.closeDialog()}}},i=r(89);const u=(0,i.Z)(s,[["render",n]]);var d=u},474:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var a=r(3396),o=r(7139);function l(e,t,r,l,n,s){const i=(0,a.up)("el-descriptions-item"),u=(0,a.up)("el-descriptions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(u,{column:1,border:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.description,(e=>((0,a.wg)(),(0,a.j4)(i,{label:e.label,key:e.key},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["label"])))),128))])),_:1})])}r(560);var n={name:"generalDescription",props:{parentData:{type:Object,required:!0},parentLabel:{type:Object,required:!0}},data(){return{desc:[]}},computed:{description(){const e=[],t=Object.entries(this.parentLabel);return t.forEach((t=>{e.push({label:t[1],key:t,value:this.parentData[t[0]]})})),e}}},s=r(89);const i=(0,s.Z)(n,[["render",l]]);var u=i},8455:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});var a=r(3396);function o(e,t,r,o,l,n){const s=(0,a.up)("el-input"),i=(0,a.up)("el-date-picker"),u=(0,a.up)("el-form-item"),d=(0,a.up)("el-form"),m=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{model:l.form},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.columns,(e=>((0,a.wg)(),(0,a.j4)(u,{label:e,key:e},{default:(0,a.w5)((()=>["기한"!==e?((0,a.wg)(),(0,a.j4)(s,{key:0,modelValue:l.form[e],"onUpdate:modelValue":t=>l.form[e]=t},null,8,["modelValue","onUpdate:modelValue"])):((0,a.wg)(),(0,a.j4)(i,{key:1,type:"daterange",placeholder:"기한을 입력하세요",modelValue:l.form[e],"onUpdate:modelValue":t=>l.form[e]=t,"range-seperator":"~","start-placeholder":"시작일","end-placeholder":"종료일","value-format":"YYYY-MM-DD",format:"YYYY/MM/DD"},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1032,["label"])))),128))])),_:1},8,["model"]),(0,a.Wm)(m,{type:"primary",onClick:n.saveForm},{default:(0,a.w5)((()=>[(0,a.Uk)("저장")])),_:1},8,["onClick"])],64)}var l={name:"generalForm",data(){return{form:[]}},emits:["saveForm"],props:{columns:{type:Array,default:()=>[],required:!0},parentData:{type:Object,default:()=>{}}},computed:{formData(){const e={};return this.columns.forEach((t=>{e[t]=""})),e}},methods:{saveForm(){this.$emit("saveForm",this.form)},debug(){console.log(this.form),console.log(this.formData),console.log(this.columns)}},mounted(){this.form=this.formData,this.parentData&&(this.form=this.parentData)}},n=r(89);const s=(0,n.Z)(l,[["render",o]]);var i=s},4546:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=r(3396);function o(e,t,r,o,l,n){const s=(0,a.up)("el-table-column"),i=(0,a.up)("el-table"),u=(0,a.up)("generalForm");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(i,{data:l.tableData,border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{prop:"type",label:"분야"}),(0,a.Wm)(s,{prop:"detail",label:"업무"}),(0,a.Wm)(s,{prop:"deadline",label:"마감일"}),(0,a.Wm)(s,{prop:"status",label:"상태"})])),_:1},8,["data"]),(0,a.Wm)(u,{columns:l.col,onSaveForm:n.saveProgress},null,8,["columns","onSaveForm"])])}r(560);var l=r(8455),n=r(2760),s={name:"CreateProgress",components:{generalForm:l["default"]},props:{parentWork:{type:Number,required:!0}},data(){return{col:["작업내용","비고"],tableData:[]}},computed:{workData(){return n.m.getWorkByIndex(this.parentWork)}},methods:{tableInit(){this.tableData.push(this.workData)},saveProgress(e){const t=[];t.push({desc:e.작업내용,etc:e.비고,index:this.parentWork}),this.$emit("saveForm",t)}},mounted(){this.tableInit()}},i=r(89);const u=(0,i.Z)(s,[["render",o]]);var d=u},5239:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var a=r(3396);function o(e,t,r,o,l,n){const s=(0,a.up)("onGoingTable");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{CurrentMember:l.CurrentMember,onFinishProgress:n.finishProgress},null,8,["CurrentMember","onFinishProgress"])])}var l=r(167),n=r(6780),s=r(5404),i={name:"WorkPage",components:{onGoingTable:s["default"]},data(){return{CurrentMember:l.N.currentMember}},methods:{finishProgress(e){n._.createWorkApproval(e),this.$emit("callFinish","WorkPage")}}},u=r(89);const d=(0,u.Z)(i,[["render",o]]);var m=d},5404:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var a=r(3396);const o=(0,a._)("h2",null,"업무",-1);function l(e,t,r,l,n,s){const i=(0,a.up)("el-divider"),u=(0,a.up)("el-table-column"),d=(0,a.up)("CreateProgress"),m=(0,a.up)("generalDescription"),p=(0,a.up)("dialogSlot"),c=(0,a.up)("el-table"),f=(0,a.up)("showProject");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c,{data:n.tableData,border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"expand"},{default:(0,a.w5)((e=>[(0,a.Wm)(i,{"content-position":"left"},{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(c,{data:e.row.Work,border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{prop:"type",label:"분야"}),(0,a.Wm)(u,{prop:"detail",label:"업무"}),(0,a.Wm)(u,{prop:"deadline",label:"마감일"}),(0,a.Wm)(u,{prop:"status",label:"상태"}),(0,a.Wm)(u,null,{default:(0,a.w5)((e=>[(0,a.Wm)(p,{title:s.dialogTitle(e.row.status),ref:"dialog"},{default:(0,a.w5)((()=>["진행"===e.row.status?((0,a.wg)(),(0,a.j4)(d,{key:0,parentWork:e.row.index,onSaveForm:s.finishProgress},null,8,["parentWork","onSaveForm"])):((0,a.wg)(),(0,a.j4)(m,{key:1,parentLabel:n.descCol,parentData:s.detailData(e.row.index)},null,8,["parentLabel","parentData"]))])),_:2},1032,["title"])])),_:1})])),_:2},1032,["data"])])),_:1}),(0,a.Wm)(u,{label:"제목"},{default:(0,a.w5)((e=>[(0,a.Wm)(p,{title:e.row.title},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{projectIndex:e.row.referenceIndex,isSaved:!0},null,8,["projectIndex"])])),_:2},1032,["title"])])),_:1}),(0,a.Wm)(u,{prop:"start_date",label:"시작일"}),(0,a.Wm)(u,{prop:"end_date",label:"종료일"}),(0,a.Wm)(u,{prop:"status",label:"상태"})])),_:1},8,["data"])])}r(560);var n=r(2760),s=r(7400),i=r(5837),u=r(4702),d=r(4546),m=r(474),p=r(6780),c={name:"onGoingTable",components:{showProject:i["default"],dialogSlot:u["default"],CreateProgress:d["default"],generalDescription:m["default"]},props:{CurrentMember:{type:Number,required:!0}},data(){return{tableData:[],descCol:{desc:"작업내용",etc:"비고"}}},computed:{ProjectData(){return s.I.getProjectByMember(this.CurrentMember)},WorkData(){const e=[];return 0===this.ProjectData.length||this.ProjectData.forEach((t=>{e.push(n.m.getWorkByProjectAndMember(t,this.CurrentMember))})),e}},methods:{tableInit(){try{this.ProjectData.forEach(((e,t)=>{this.tableData.push({title:e.title,start_date:e.start_date,end_date:e.end_date,status:e.status,referenceIndex:e.index,Work:[this.WorkData[t]]||0})}))}catch(e){console.log(e)}},finishProgress(e){this.$refs.dialog.closeDialog(),this.$emit("finishProgress",e)},dialogTitle(e){switch(e){case"결재요청":return"상세";case"진행":return"업무 보고";case"완료":return"상세";default:return"상세"}},detailData(e){let t=n.m.getWorkByIndex(e);void 0===t.desc&&(t=p._.getApprovalByParentIdx(e)[0]);const r={desc:t.desc,etc:t.etc};return r}},mounted(){this.tableInit()}},f=r(89);const h=(0,f.Z)(c,[["render",l]]);var b=h}}]);
//# sourceMappingURL=239.a66f8f4c.js.map