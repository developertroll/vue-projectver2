"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[121,524,701,613,901,212,136,85,81],{7296:function(e,t,a){a.d(t,{f:function(){return l}});a(560);var r=a(4870),n=a(167),s=a(6797),o=a.n(s);const l=(0,r.Um)({GroupList:localStorage.getItem("talkGroupList")?JSON.parse(localStorage.getItem("talkGroupList")):[],refreshGroupList(){localStorage.setItem("talkGroupList",JSON.stringify(this.GroupList)),this.GroupList=JSON.parse(localStorage.getItem("talkGroupList"))},MessageList:localStorage.getItem("talkMessageList")?JSON.parse(localStorage.getItem("talkMessageList")):[],refreshMessageList(){localStorage.setItem("talkMessageList",JSON.stringify(this.MessageList)),this.MessageList=JSON.parse(localStorage.getItem("talkMessageList"))},refreshAll(){this.refreshGroupList(),this.refreshMessageList()},MessageTemplate:{index:"",parentGroup:"",owner:"",content:"",update:"",status:!0},GroupTemplate:{index:"",name:"",member:[],message:[],update:"",status:!0},createGroup(e,t){const a={index:this.GroupList.length,name:e,member:t,message:[],update:o()().format("YYYY-MM-DD"),status:!0};this.GroupList.push(a),this.createMessage(a.index,"채팅방이 생성되었습니다"),this.refreshGroupList()},createMessage(e,t){const a={index:this.MessageList.length,parentGroup:e,owner:n.N.currentMember,content:t,update:o()().format("YYYY-MM-DD HH:mm:ss"),status:!0},r=this.findGroupByIndex(e);r.update=a.update,r.message.push(a.index),this.MessageList.push(a),this.refreshAll()},findGroupByIndex(e){return this.GroupList.find((t=>t.index===e))},findMessageByIndex(e){return this.MessageList.find((t=>t.index===e))},findMessageGroupByIndex(e){return this.MessageList.filter((t=>t.parentGroup===e))},findLastMessageByGroupIndex(e){const t=this.findGroupByIndex(e),a=t.message[t.message.length-1];return this.findMessageByIndex(a)},findGroupByMember(e){return this.GroupList.filter((t=>t.member.includes(e)))},getGroupByIndex(e){const t=this.findGroupByIndex(e),a={...t},r=[];return a.member.forEach((e=>{r.push(n.N.findMemberByIndex(e))})),a.member=r,a}})},1524:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(3396);function n(e,t,a,n,s,o){const l=(0,r.up)("el-input"),u=(0,r.up)("el-form-item"),i=(0,r.up)("memberTransfer"),m=(0,r.up)("dialogSlot"),d=(0,r.up)("el-button"),p=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(p,{model:s.form,"label-width":"80px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{label:"그룹명"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:s.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.form.name=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(u,{label:"멤버"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:o.translatedMember,"onUpdate:modelValue":t[1]||(t[1]=e=>o.translatedMember=e),readonly:""},{append:(0,r.w5)((()=>[(0,r.Wm)(m,{title:"추가",ref:"dialog"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{onSave:o.saveMember,parentData:s.form.member},null,8,["onSave","parentData"])])),_:1},512)])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)(u,{class:"CenterButtons"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"primary",onClick:o.submitForm},{default:(0,r.w5)((()=>[(0,r.Uk)("생성")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])}a(560);var s=a(167),o=a(4702),l=a(1085),u={name:"CreateTalkGroup",components:{dialogSlot:o["default"],memberTransfer:l["default"]},data(){return{form:{name:"",member:[]},translateMember:[]}},methods:{translateMemberTable(e){e.forEach((e=>{let t=s.N.findMemberByIndex(e);this.translateMember.push(`${t.name} ${t.rank}(${t.department})`)}))},saveMember(e){this.form.member=e,this.form.member.push(s.N.currentMember),this.$refs.dialog.closeDialog(),this.translateMember=[],this.translateMemberTable(e)},submitForm(){this.$emit("createGroup",this.form)}},computed:{translatedMember(){return this.translateMember.join(", ")}}},i=a(89);const m=(0,i.Z)(u,[["render",n]]);var d=m},701:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var r=a(3396),n=a(7139),s=a(9242);const o={class:"headline"};function l(e,t,a,l,u,i){const m=(0,r.up)("el-button"),d=(0,r.up)("el-row"),p=(0,r.up)("TalkTemplate"),c=(0,r.up)("el-scrollbar"),f=(0,r.up)("el-input");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",o,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"primary",onClick:i.returnToMain},{default:(0,r.w5)((()=>[(0,r.Uk)("목록")])),_:1},8,["onClick"]),(0,r._)("h2",null,(0,n.zw)(u.Title),1)])),_:1})]),(0,r.Wm)(c,{"max-height":"400px"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.MessageData,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.index},[(0,r._)("div",null,[(0,r.Wm)(p,{MessageIndex:e.index,checkChain:i.checkChainMessage(e.index)},null,8,["MessageIndex","checkChain"])])])))),128))])),_:1}),(0,r.Wm)(f,{modelValue:u.content,"onUpdate:modelValue":t[0]||(t[0]=e=>u.content=e),onKeyup:(0,s.D2)(i.sendMessage,["enter"])},{append:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"primary",onClick:i.sendMessage},{default:(0,r.w5)((()=>[(0,r.Uk)("전송")])),_:1},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])}var u=a(7296),i=a(6797),m=a.n(i),d=a(3212),p={name:"ShowTemplate",components:{TalkTemplate:d["default"]},props:{GroupIndex:{type:Number}},computed:{MessageData(){const e=u.f.findMessageGroupByIndex(this.GroupIndex);return Array.isArray(e)?e:[e]}},data(){return{currentTime:m()().format("YYYY-MM-DD HH:mm:ss"),content:"",Title:""}},methods:{pageInit(){this.Title=u.f.findGroupByIndex(this.GroupIndex).name},sendMessage(){u.f.createMessage(this.GroupIndex,this.content),this.content=""},returnToMain(){this.$emit("returnToMain")},checkChainMessage(e){const t=this.MessageData.findIndex((t=>t.index===e));if(console.log(t),0===t)return!1;const a=this.MessageData[t].owner,r=this.MessageData[t-1].owner;return a===r}},mounted(){this.pageInit()}},c=a(89);const f=(0,c.Z)(p,[["render",l]]);var h=f},2372:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=a(3396);function n(e,t,a,n,s,o){const l=(0,r.up)("TalkGroupTemplate");return(0,r.wg)(),(0,r.iD)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.sortedGroupData,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.index},[(0,r.Wm)(l,{GroupIndex:e.index,onShowRoom:o.showRoom},null,8,["GroupIndex","onShowRoom"])])))),128))])}var s=a(7296),o=a(167),l=a(2901),u=a(6797),i=a.n(u),m={name:"TalkGroupTable",components:{TalkGroupTemplate:l["default"]},computed:{GroupData(){return s.f.findGroupByMember(o.N.currentMember)}},data(){return{sortedGroupData:[]}},methods:{sortGroup(){return this.GroupData.sort(((e,t)=>i()(t.update).diff(i()(e.update))))},showRoom(e){this.$emit("showRoom",e)}},mounted(){this.sortedGroupData=this.sortGroup()}},d=a(89);const p=(0,d.Z)(m,[["render",n]]);var c=p},2901:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=a(3396),n=a(7139);const s={class:"clickHover"},o={class:"greyLetter"};function l(e,t,a,l,u,i){const m=(0,r.up)("User"),d=(0,r.up)("el-icon"),p=(0,r.up)("el-tag"),c=(0,r.up)("el-tooltip"),f=(0,r.up)("el-col"),h=(0,r.up)("el-row"),g=(0,r.up)("el-card");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(g,{onClick:i.showRoom},{header:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Uk)((0,n.zw)(i.GroupData.name)+" ",1),(0,r.Wm)(c,{effect:"dark",content:u.members,placement:"top"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m)])),_:1}),(0,r.Uk)(" "+(0,n.zw)(u.memberNumber),1)])),_:1})])),_:1},8,["content"])])])),default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{span:18},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(u.finalMessage.content),1)])),_:1}),(0,r.Wm)(f,{span:6},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(u.finalUpdate),1)])),_:1})])),_:1})])])),_:1},8,["onClick"])])}var u=a(7296),i=a(167),m=a(2748),d=a(6797),p=a.n(d),c={name:"TalkGroupTemplate",components:{User:m.n5m},props:{GroupIndex:{type:Number,required:!0}},computed:{GroupData(){return u.f.findGroupByIndex(this.GroupIndex)}},data(){return{finalMessage:{},memberNumber:0,members:"",finalUpdate:""}},methods:{pageInit(){this.finalMessage=this.getFinalMessage(this.GroupIndex),this.memberNumber=this.GroupData.member.length,this.members=this.GroupData.member.map((e=>i.N.findMemberByIndex(e).name)).join(", ");const e=p()().format("YYYY-MM-DD HH:mm:ss");p()(this.finalMessage.update).isSame(e,"day")?this.finalUpdate=p()(this.finalMessage.update).format("HH:mm:ss"):this.finalUpdate=p()(this.finalMessage.update).format("YYYY-MM-DD HH:mm:ss")},getFinalMessage(e){try{const t=u.f.findLastMessageByGroupIndex(e);return t}catch(t){console.log(t)}},showRoom(){this.$emit("showRoom",this.GroupIndex)}},mounted(){this.pageInit()}},f=a(89);const h=(0,f.Z)(c,[["render",l]]);var g=h},4121:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=a(3396);const n={key:0},s={class:"rightSideButtons"},o={key:1},l={key:2};function u(e,t,a,u,i,m){const d=(0,r.up)("el-button"),p=(0,r.up)("el-button-group"),c=(0,r.up)("TalkGroupTable"),f=(0,r.up)("CreateTalkGroup"),h=(0,r.up)("ShowTalk");return(0,r.wg)(),(0,r.iD)("div",null,[0===i.active?((0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",s,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"primary",onClick:m.createGroup},{default:(0,r.w5)((()=>[(0,r.Uk)("그룹생성")])),_:1},8,["onClick"])])),_:1})]),(0,r.Wm)(c,{onShowRoom:m.showRoom},null,8,["onShowRoom"])])):(0,r.kq)("",!0),1===i.active?((0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(f,{onCreateGroup:m.submitGroup},null,8,["onCreateGroup"])])):(0,r.kq)("",!0),2===i.active?((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(h,{GroupIndex:i.roomIndex,onReturnToMain:m.returnToMain},null,8,["GroupIndex","onReturnToMain"])])):(0,r.kq)("",!0)])}var i=a(2372),m=a(1524),d=a(701),p=a(7296),c={name:"TalkMain",components:{TalkGroupTable:i["default"],CreateTalkGroup:m["default"],ShowTalk:d["default"]},data(){return{active:0,roomIndex:null}},methods:{createGroup(){this.active=1},submitGroup(e){p.f.createGroup(e.name,e.member),this.active=0},showRoom(e){this.roomIndex=e,this.active=2},returnToMain(){this.active=0}}},f=a(89);const h=(0,f.Z)(c,[["render",u]]);var g=h},3212:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var r=a(3396),n=a(7139);const s={key:0},o={class:"message-Box"},l={key:1},u={class:"message-Box"};function i(e,t,a,i,m,d){const p=(0,r.up)("userAvatar"),c=(0,r.up)("el-col"),f=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",null,[m.isMine?((0,r.wg)(),(0,r.iD)("div",s,[a.checkChain?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(f,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{span:4,offset:20},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{parentMember:d.MessageData.owner},null,8,["parentMember"])])),_:1})])),_:1})),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{span:4,offset:20},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(m.update),1)])),_:1})])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{span:8,offset:16},{default:(0,r.w5)((()=>[(0,r._)("div",o,(0,n.zw)(d.MessageData.content),1)])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",l,[a.checkChain?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(f,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{span:4},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{parentMember:d.MessageData.owner},null,8,["parentMember"])])),_:1})])),_:1})),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{span:4},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(m.update),1)])),_:1})])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{span:8},{default:(0,r.w5)((()=>[(0,r._)("div",u,(0,n.zw)(d.MessageData.content),1)])),_:1})])),_:1})]))])}var m=a(7296),d=a(167),p=a(2081),c=a(6797),f=a.n(c),h={name:"TalkTemplate",components:{userAvatar:p["default"]},props:{MessageIndex:{type:Number},checkChain:{type:Boolean,default:!1}},computed:{MessageData(){return m.f.findMessageByIndex(this.MessageIndex)}},data(){return{isMine:!1,update:""}},methods:{pageInit(){this.isMine=this.MessageData.owner===d.N.currentMember;const e=f()().format("YYYY-MM-DD HH:mm:ss");f()(this.MessageData.update).isSame(e,"day")?this.update=f()(this.MessageData.update).format("HH:mm:ss"):this.update=f()(this.MessageData.update).format("YYYY-MM-DD")}},mounted(){this.pageInit()}},g=a(89);const b=(0,g.Z)(h,[["render",i]]);var M=b},4702:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=a(3396),n=a(7139);const s={class:"el-header"};function o(e,t,a,o,l,u){const i=(0,r.up)("el-button"),m=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",null,[(0,r.Wm)(i,{type:"primary",onClick:u.openDialog},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.title),1)])),_:1},8,["onClick"])]),(0,r.Wm)(m,{modelValue:l.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>l.dialogVisible=e),"append-to-body":"","show-close":!1},{header:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r._)("h2",null,(0,n.zw)(a.title),1),(0,r.Wm)(i,{onClick:u.closeDialog},{default:(0,r.w5)((()=>[(0,r.Uk)("닫기")])),_:1},8,["onClick"])])])),default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{onSaveForm:t[0]||(t[0]=(...e)=>u.saveForm&&u.saveForm(...e))})])),_:3},8,["modelValue"])])}var l={name:"dialogSlot",data(){return{dialogVisible:!1}},props:{title:{type:String,default:""}},methods:{openDialog(){this.dialogVisible=!0},closeDialog(){this.dialogVisible=!1},saveForm(e){this.$emit("saveForm",e),this.closeDialog()}}},u=a(89);const i=(0,u.Z)(l,[["render",o]]);var m=i},1085:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(3396);const n={class:"alignCenter"},s={class:"CenterButtons"};function o(e,t,a,o,l,u){const i=(0,r.up)("el-transfer"),m=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",n,[(0,r.Wm)(i,{modelValue:l.member,"onUpdate:modelValue":t[0]||(t[0]=e=>l.member=e),data:l.transferTable,titles:["직원","참여자"],filterable:""},null,8,["modelValue","data"])]),(0,r._)("div",s,[(0,r.Wm)(m,{type:"primary",onClick:u.saveMember},{default:(0,r.w5)((()=>[(0,r.Uk)("저장")])),_:1},8,["onClick"]),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("취소")])),_:1})])],64)}a(560);var l=a(167),u={name:"MemberTransfer",emits:["save"],computed:{memberData(){return l.N.callTransferMember()}},props:{parentData:{type:Array,default:()=>[]},disableTable:{type:Array,default:()=>[]}},data(){return{member:[],transferTable:[]}},methods:{saveMember(){this.$emit("save",this.member)},transferInit(){this.memberData.forEach((e=>{this.disableTable.includes(e.key)&&(e.disabled=!0),this.transferTable.push(e)}))}},mounted(){0!==this.parentData.length&&(this.member=this.parentData),this.transferInit()}},i=a(89);const m=(0,i.Z)(u,[["render",o]]);var d=m},2081:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=a(3396),n=a(7139);const s={class:"nameTab"};function o(e,t,a,o,l,u){const i=(0,r.up)("UserFilled"),m=(0,r.up)("el-icon"),d=(0,r.up)("el-avatar");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(d,{color:l.color,"background-color":l.color},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{color:l.color,size:l.size},{default:(0,r.w5)((()=>[(0,r.Wm)(i)])),_:1},8,["color","size"])])),_:1},8,["color","background-color"]),(0,r._)("span",s,(0,n.zw)(l.member.name)+"("+(0,n.zw)(l.member.department)+")",1)])}var l=a(2748),u=a(167),i={name:"userAvatar",components:{UserFilled:l.wvC},data(){return{size:"large",member:{},color:""}},props:{parentMember:{type:Number,default:2}},methods:{colorCheck(){switch(this.member.department){case"기획":return"#409EFF";case"개발":return"#67C23A";case"디자인":return"#E6A23C";case"기타":return"#F56C6C";default:return"#909399"}}},mounted(){this.member=u.N.findMemberByIndex(this.parentMember),this.color=this.colorCheck()}},m=a(89);const d=(0,m.Z)(i,[["render",o],["__scopeId","data-v-5cbeb6c0"]]);var p=d}}]);
//# sourceMappingURL=121.dc3f4948.js.map