{"version":3,"file":"js/613.33f8500f.js","mappings":"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","sources":["webpack://vue-projectver2/./src/components/composables/TalkMessage.js","webpack://vue-projectver2/./src/components/Talk/TalkGroupTable.vue","webpack://vue-projectver2/./src/components/Talk/TalkGroupTable.vue?0c4a","webpack://vue-projectver2/./src/components/Talk/TalkGroupTemplate.vue","webpack://vue-projectver2/./src/components/Talk/TalkGroupTemplate.vue?980a"],"sourcesContent":["import { shallowReactive } from \"vue\";\r\nimport { Member } from \"./Member\";\r\nimport moment from \"moment\";\r\n\r\nexport const TalkMessage = shallowReactive({\r\n  GroupList: localStorage.getItem(\"talkGroupList\")\r\n    ? JSON.parse(localStorage.getItem(\"talkGroupList\"))\r\n    : [],\r\n  refreshGroupList() {\r\n    localStorage.setItem(\"talkGroupList\", JSON.stringify(this.GroupList));\r\n    this.GroupList = JSON.parse(localStorage.getItem(\"talkGroupList\"));\r\n  },\r\n  MessageList: localStorage.getItem(\"talkMessageList\")\r\n    ? JSON.parse(localStorage.getItem(\"talkMessageList\"))\r\n    : [],\r\n  refreshMessageList() {\r\n    localStorage.setItem(\"talkMessageList\", JSON.stringify(this.MessageList));\r\n    this.MessageList = JSON.parse(localStorage.getItem(\"talkMessageList\"));\r\n  },\r\n  refreshAll() {\r\n    this.refreshGroupList();\r\n    this.refreshMessageList();\r\n  },\r\n  MessageTemplate: {\r\n    index: \"\",\r\n    parentGroup: \"\",\r\n    owner: \"\",\r\n    content: \"\",\r\n    update: \"\", // 메세지가 생성된 시간\r\n    status: true, // true: 존재하는 메세지 false: 삭제된 메세지\r\n  },\r\n  GroupTemplate: {\r\n    index: \"\",\r\n    name: \"\",\r\n    member: [],\r\n    message: [],\r\n    update: \"\", // 마지막 메시지가 생성된 시간\r\n    status: true, // true: 존재하는 그룹방, false: 삭제된 그룹방\r\n  },\r\n  // 생성 함수\r\n  createGroup(name, member) {\r\n    const item = {\r\n      index: this.GroupList.length,\r\n      name: name,\r\n      member: member,\r\n      message: [],\r\n      update: moment().format(\"YYYY-MM-DD\"),\r\n      status: true,\r\n    };\r\n    this.GroupList.push(item);\r\n    // 에러를 방지하기 위해 메시지 1개를 임의로 넣어줌\r\n    this.createMessage(item.index, \"채팅방이 생성되었습니다\");\r\n    this.refreshGroupList();\r\n  },\r\n  createMessage(parentGroup, content) {\r\n    const item = {\r\n      index: this.MessageList.length,\r\n      parentGroup: parentGroup,\r\n      owner: Member.currentMember,\r\n      content: content,\r\n      update: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\r\n      status: true,\r\n    };\r\n    const targetGroup = this.findGroupByIndex(parentGroup);\r\n    targetGroup.update = item.update;\r\n    targetGroup.message.push(item.index);\r\n    this.MessageList.push(item);\r\n    this.refreshAll();\r\n  },\r\n  // 조회 함수\r\n  findGroupByIndex(index) {\r\n    return this.GroupList.find((el) => el.index === index);\r\n  },\r\n  findMessageByIndex(index) {\r\n    return this.MessageList.find((el) => el.index === index);\r\n  },\r\n  findMessageGroupByIndex(index) {\r\n    return this.MessageList.filter((el) => el.parentGroup === index);\r\n  },\r\n  findLastMessageByGroupIndex(index) {\r\n    const target = this.findGroupByIndex(index);\r\n    const lastMessageIndex = target.message[target.message.length - 1];\r\n    return this.findMessageByIndex(lastMessageIndex);\r\n  },\r\n  findGroupByMember(member) {\r\n    return this.GroupList.filter((el) => el.member.includes(member));\r\n  },\r\n  // 번역된 조회 함수\r\n  getGroupByIndex(index) {\r\n    const target = this.findGroupByIndex(index);\r\n    const modifiedTarget = { ...target }; // Create a copy of the target object\r\n    const translatedMember = [];\r\n    modifiedTarget.member.forEach((el) => {\r\n      translatedMember.push(Member.findMemberByIndex(el));\r\n    });\r\n    modifiedTarget.member = translatedMember;\r\n    return modifiedTarget;\r\n  },\r\n});\r\n","<template lang=\"\">\r\n  <div>\r\n    <div v-for=\"Group in sortedGroupData\" :key=\"Group.index\">\r\n      <TalkGroupTemplate :GroupIndex=\"Group.index\" @showRoom=\"showRoom\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { TalkMessage } from \"@/components/composables/TalkMessage.js\";\r\nimport { Member } from \"@/components/composables/Member.js\";\r\nimport TalkGroupTemplate from \"./TalkGroupTemplate.vue\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  name: \"TalkGroupTable\",\r\n  components: {\r\n    TalkGroupTemplate,\r\n  },\r\n  computed: {\r\n    GroupData() {\r\n      return TalkMessage.findGroupByMember(Member.currentMember);\r\n      // GroupData는 현재 멤버가 속한 그룹들을 반환\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      sortedGroupData: [],\r\n    };\r\n  },\r\n  methods: {\r\n    sortGroup() {\r\n      return this.GroupData.sort((a, b) =>\r\n        moment(b.update).diff(moment(a.update))\r\n      );\r\n    },\r\n    showRoom(item) {\r\n      this.$emit(\"showRoom\", item);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.sortedGroupData = this.sortGroup();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"\"></style>\r\n","import { render } from \"./TalkGroupTable.vue?vue&type=template&id=aaede33c&lang=true\"\nimport script from \"./TalkGroupTable.vue?vue&type=script&lang=js\"\nexport * from \"./TalkGroupTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template lang=\"\">\r\n  <div class=\"clickHover\">\r\n    <el-card @click=\"showRoom\">\r\n      <template #header>\r\n        <!-- 그룹명, 그룹인원수 -->\r\n        <div>\r\n          {{ GroupData.name }}\r\n          <el-tooltip effect=\"dark\" :content=\"members\" placement=\"top\">\r\n            <el-tag>\r\n              <el-icon><User /></el-icon>\r\n              {{ memberNumber }}\r\n            </el-tag>\r\n          </el-tooltip>\r\n        </div>\r\n      </template>\r\n      <!-- 마지막 메시지와 해당 메시지가 보내진 시간 기록 -->\r\n      <div class=\"greyLetter\">\r\n        <el-row>\r\n          <el-col :span=\"18\">\r\n            {{ finalMessage.content }}\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            {{ finalUpdate }}\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { TalkMessage } from \"@/components/composables/TalkMessage.js\";\r\nimport { Member } from \"@/components/composables/Member.js\";\r\nimport { User } from \"@element-plus/icons-vue\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  name: \"TalkGroupTemplate\",\r\n  components: {\r\n    User,\r\n  },\r\n  props: {\r\n    GroupIndex: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  computed: {\r\n    GroupData() {\r\n      return TalkMessage.findGroupByIndex(this.GroupIndex);\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      finalMessage: {},\r\n      memberNumber: 0,\r\n      members: \"\",\r\n      finalUpdate: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    pageInit() {\r\n      this.finalMessage = this.getFinalMessage(this.GroupIndex);\r\n      this.memberNumber = this.GroupData.member.length;\r\n      this.members = this.GroupData.member\r\n        .map((item) => Member.findMemberByIndex(item).name)\r\n        .join(\", \");\r\n      const today = moment().format(\"YYYY-MM-DD HH:mm:ss\");\r\n      if (moment(this.finalMessage.update).isSame(today, \"day\")) {\r\n        this.finalUpdate = moment(this.finalMessage.update).format(\"HH:mm:ss\");\r\n      } else {\r\n        this.finalUpdate = moment(this.finalMessage.update).format(\r\n          \"YYYY-MM-DD HH:mm:ss\"\r\n        );\r\n      }\r\n    },\r\n    getFinalMessage(index) {\r\n      try {\r\n        const finalMessage = TalkMessage.findLastMessageByGroupIndex(index);\r\n        return finalMessage;\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    showRoom() {\r\n      this.$emit(\"showRoom\", this.GroupIndex);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.pageInit();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"\"></style>\r\n","import { render } from \"./TalkGroupTemplate.vue?vue&type=template&id=79e0e47e&lang=true\"\nimport script from \"./TalkGroupTemplate.vue?vue&type=script&lang=js\"\nexport * from \"./TalkGroupTemplate.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["TalkMessage","shallowReactive","GroupList","localStorage","getItem","JSON","parse","refreshGroupList","setItem","stringify","this","MessageList","refreshMessageList","refreshAll","MessageTemplate","index","parentGroup","owner","content","update","status","GroupTemplate","name","member","message","createGroup","item","length","moment","format","push","createMessage","Member","currentMember","targetGroup","findGroupByIndex","find","el","findMessageByIndex","findMessageGroupByIndex","filter","findLastMessageByGroupIndex","target","lastMessageIndex","findGroupByMember","includes","getGroupByIndex","modifiedTarget","translatedMember","forEach","findMemberByIndex","_createElementBlock","_Fragment","_renderList","$data","sortedGroupData","Group","key","_createVNode","_component_TalkGroupTemplate","GroupIndex","onShowRoom","$options","showRoom","components","TalkGroupTemplate","computed","GroupData","data","methods","sortGroup","sort","a","b","diff","$emit","mounted","__exports__","render","class","_hoisted_1","_component_el_card","onClick","header","_withCtx","_createElementVNode","_component_el_tooltip","effect","members","placement","_component_el_tag","_component_el_icon","_component_User","_toDisplayString","memberNumber","_hoisted_2","_component_el_row","_component_el_col","span","finalMessage","finalUpdate","User","props","type","Number","required","pageInit","getFinalMessage","map","join","today","isSame","e","console","log"],"sourceRoot":""}