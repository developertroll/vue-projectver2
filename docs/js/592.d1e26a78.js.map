{"version":3,"file":"js/592.d1e26a78.js","mappings":"2NAKO,MAAMA,GAAUC,EAAAA,EAAAA,IAAgB,CACrCC,KAAMC,aAAaC,QAAQ,eACvBC,KAAKC,MAAMH,aAAaC,QAAQ,gBAChC,GACJG,WAAAA,GACEJ,aAAaK,QAAQ,cAAeH,KAAKI,UAAUC,KAAKR,OACxDQ,KAAKR,KAAOG,KAAKC,MAAMH,aAAaC,QAAQ,eAC9C,EACAO,SAAU,CACRC,MAAO,GACPC,KAAM,GACNC,GAAI,GACJC,UAAW,GACXC,MAAO,GACPC,QAAS,GACTC,OAAQC,MAASC,OAAO,cACxBC,QAAQ,EACRC,MAAM,GAERC,aAAAA,CAAcC,GACZ,GAAIA,EAAUV,GAAGW,OAAS,EAsBxB,OArBAD,EAAUV,GAAGY,SAASC,IACpB,MAAMC,EAAO,CACXhB,MAAOF,KAAKR,KAAKuB,OACjBZ,KAAMgB,EAAAA,EAAOC,cACbhB,GAAIa,EACJZ,UAC0B,KAAxBS,EAAUT,UACN,GACAgB,MAAMC,QAAQR,EAAUT,WACxBS,EAAUT,UACV,CAACS,EAAUT,WACjBC,MAAOQ,EAAUR,MACjBC,QAASO,EAAUP,QACnBC,OAAQC,MAASC,OAAO,cACxBC,QAAQ,EACRC,MAAM,GAERW,EAAAA,EAAMC,YAAY,cAAeN,EAAKf,KAAMe,EAAKd,IACjDJ,KAAKR,KAAKiC,KAAKP,EAAK,SAEtBlB,KAAKH,cAGP,MAAMqB,EAAO,CACXhB,MAAOF,KAAKR,KAAKuB,OACjBZ,KAAMgB,EAAAA,EAAOC,cACbhB,GAAIU,EAAUV,GACdC,UAC0B,KAAxBS,EAAUT,UACN,GACAgB,MAAMC,QAAQR,EAAUT,WACxBS,EAAUT,UACV,CAACS,EAAUT,WACjBC,MAAOQ,EAAUR,MACjBC,QAASO,EAAUP,QACnBC,OAAQC,MAASC,OAAO,cACxBC,QAAQ,GAEVX,KAAKR,KAAKiC,KAAKP,GACfK,EAAAA,EAAMC,YAAY,cAAeN,EAAKf,KAAMe,EAAKd,IACjDJ,KAAKH,aACP,EACA6B,WAAAA,CAAYC,EAAcC,EAAaC,GAAa,GAClD,MAAMC,EAAa,CACjB5B,MAAOF,KAAKR,KAAKuB,OACjBZ,KAAMgB,EAAAA,EAAOC,cACbhB,GAAIuB,EAAavB,GACjBC,UAC6B,KAA3BsB,EAAatB,UACT,GACAgB,MAAMC,QAAQK,EAAatB,WAC3BsB,EAAatB,UACb,CAACsB,EAAatB,WACpBC,MAAOqB,EAAarB,MACpBC,QAASoB,EAAapB,QACtBC,OAAQC,MAASC,OAAO,cACxBC,QAAQ,EACRC,MAAM,GAEJiB,IACF7B,KAAK+B,6BAA6BH,GAAab,OAAS,EACpDf,KAAKgC,qBAAqBJ,EAAaE,EAAW5B,OAClDF,KAAKiC,wBAAwBL,EAAaE,EAAW5B,QAE3DF,KAAKR,KAAKiC,KAAKK,GACfP,EAAAA,EAAMC,YAAY,cAAeM,EAAW3B,KAAM2B,EAAW1B,IAC7DJ,KAAKH,aACP,EACAqC,UAAAA,GACE,IAAIC,EAAS,GAwBb,OAvBAnC,KAAKR,KAAKwB,SAASC,IACjB,GAAIA,EAAGN,OAAQ,CACb,IAAIN,EAAY,GACZY,EAAGZ,UACLY,EAAGZ,UAAUW,SAASC,IACpBZ,GAAac,EAAAA,EAAOiB,kBAAkBnB,GAAIoB,KAAO,IAAI,IAGvDhC,EAAY,GAEd8B,EAAOV,KAAK,CACVvB,MAAOe,EAAGf,MACVC,KAAMgB,EAAAA,EAAOiB,kBAAkBnB,EAAGd,MAAMkC,KACxCjC,GAAIe,EAAAA,EAAOiB,kBAAkBnB,EAAGb,IAAIiC,KACpChC,UAAWA,EACXC,MAAOW,EAAGX,MACVC,QAASU,EAAGV,QACZC,OAAQS,EAAGT,OACXG,OAAQM,EAAGN,OACXC,KAAMK,EAAGL,MAEb,KAEKuB,CACT,EACAG,UAAAA,CAAWC,GACT,MAAMC,EAAarB,EAAAA,EAAOiB,kBAAkBG,GAAQF,KACpD,OAAOrC,KAAKkC,aAAaO,QACtBxB,GAAOA,EAAGb,KAAOoC,GAAcvB,EAAGZ,UAAUqC,SAASF,IAE1D,EACAG,kBAAAA,CAAmBzC,GACjB,OAAOF,KAAKkC,aAAaU,MAAM3B,GAAOA,EAAGf,QAAUA,GACrD,EACA2C,0BAAAA,CAA2B3C,GACzB,OAAOF,KAAKR,KAAKoD,MAAM3B,GAAOA,EAAGf,QAAUA,GAC7C,EACA4C,aAAAA,CAAc5C,GACZ,MAAM6C,EAAS/C,KAAK2C,mBAAmBzC,GACvC6C,EAAOpC,QAAS,EAChBX,KAAKH,aACP,EACAmD,8BAAAA,CAA+B9C,GAC7B,MAAM6C,EAAS/C,KAAKR,KAAKoD,MAAM3B,GAAOA,EAAGf,QAAUA,IAC7C+C,EAAeF,EAAO3C,GACtB8C,EAAmBlD,KAAKR,KAAKiD,QAAQxB,GAAOA,EAAGb,KAAO6C,IACtDE,EAAgBD,EAAiBN,MAAM3B,GAAOA,EAAGf,QAAUA,IACjE,MAAQ,GAAEgD,EAAiBE,QAAQD,GAAiB,KAClDD,EAAiBnC,QAErB,EACAsC,cAAAA,CAAenD,GACb,MAAM6C,EAAS/C,KAAKR,KAAKoD,MAAM3B,GAAOA,EAAGf,QAAUA,IACnD,OAAO6C,EAAO3C,KAAOe,EAAAA,EAAOC,aAC9B,EACAkC,WAAAA,CAAYpD,GACV,MAAM6C,EAAS/C,KAAKR,KAAKoD,MAAM3B,GAAOA,EAAGf,QAAUA,IACnD6C,EAAOnC,MAAO,EACdZ,KAAKH,aACP,EAEA0D,kBAAmB9D,aAAaC,QAAQ,qBACpCC,KAAKC,MAAMH,aAAaC,QAAQ,sBAChC,GACJ8D,YAAAA,GACE/D,aAAaK,QACX,oBACAH,KAAKI,UAAUC,KAAKuD,oBAEtBvD,KAAKuD,kBAAoB5D,KAAKC,MAC5BH,aAAaC,QAAQ,qBAEzB,EACAuC,uBAAAA,CAAwBwB,EAAiBC,GACvC,MAAMC,EAAQ,CACZzD,MAAOF,KAAKuD,kBAAkBxC,OAC9B0C,gBAAiBA,EACjBC,aAAc,CAACA,GACf/C,QAAQ,GAEVX,KAAKuD,kBAAkB9B,KAAKkC,GAC5B3D,KAAKwD,cACP,EACAxB,oBAAAA,CAAqByB,EAAiBC,GACpC,IAAIX,EAAS/C,KAAK4D,mBAAmBH,QACtBI,IAAXd,IACFA,EAAS/C,KAAK+B,6BAA6B0B,GAAiB,IAE9DV,EAAOW,aAAajC,KAAKiC,GACzB1D,KAAKwD,cACP,EACAI,kBAAAA,CAAmB1D,GACjB,OAAOF,KAAKuD,kBAAkBX,MAAM3B,GAAOA,EAAGwC,kBAAoBvD,GACpE,EACA6B,4BAAAA,CAA6B7B,GAC3B,OAAOF,KAAKuD,kBAAkBd,QAAQxB,GACpCA,EAAGyC,aAAahB,SAASxC,IAE7B,EACA4D,kBAAAA,CAAmBC,GACjB,MAAM5B,EAAS,GACf,GAAInC,KAAK4D,mBAAmBG,GAAe,CACzC,MAAMhB,EAAS/C,KAAK4D,mBAAmBG,GAKvC,OAJA5B,EAAOV,KAAKzB,KAAK6C,2BAA2BE,EAAOU,kBACnDV,EAAOW,aAAa1C,SAASC,IAC3BkB,EAAOV,KAAKzB,KAAK6C,2BAA2B5B,GAAI,IAE3CkB,CACT,CAAO,GAAInC,KAAK+B,6BAA6BgC,GAAchD,OAAS,EAAG,CACrE,MAAMgC,EAAS/C,KAAK+B,6BAA6BgC,GAOjD,OANAhB,EAAO/B,SAASC,IACdkB,EAAOV,KAAKzB,KAAK6C,2BAA2B5B,EAAGwC,kBAC/CxC,EAAGyC,aAAa1C,SAASC,IACvBkB,EAAOV,KAAKzB,KAAK6C,2BAA2B5B,GAAI,GAChD,IAEGkB,CACT,CACE,OAAOA,CAEX,G,qGCnNQ6B,MAAM,W,uHAJdC,EAAAA,EAAAA,IAKM,aAJJC,EAAAA,EAAAA,IAEYC,EAAA,CAFAC,MAAOC,EAAAD,MAAQ,mBAAkBC,EAAAD,O,mBAC3C,IAA6D,EAA7DF,EAAAA,EAAAA,IAA6DI,EAAA,CAAnDF,MAAOC,EAAAD,MAAQG,KAAMF,EAAAE,M,mBAAM,IAAc,EAAdL,EAAAA,EAAAA,IAAcM,M,kEAErDC,EAAAA,EAAAA,GAAuE,OAAvEC,GAAuEC,EAAAA,EAAAA,IAA9CN,EAAA9B,OAAOF,MAAO,KAACsC,EAAAA,EAAAA,IAAGN,EAAA9B,OAAOqC,YAAa,IAAC,I,wBAMpE,GACEvC,KAAM,aACNwC,WAAY,CACVC,WAAUA,EAAAA,KAEZC,IAAAA,GACE,MAAO,CACLR,KAAM,QACNhC,OAAQ,CAAC,EACT6B,MAAO,GAEX,EACAY,MAAO,CACLC,aAAc,CACZC,KAAMC,OACNC,QAAS,IAGbC,QAAS,CACPC,UAAAA,GACE,OAAQtF,KAAKuC,OAAOqC,YAClB,IAAK,KACH,MAAO,UACT,IAAK,KACH,MAAO,UACT,IAAK,MACH,MAAO,UACT,IAAK,KACH,MAAO,UACT,QACE,MAAO,UAEb,GAEFW,OAAAA,GACEvF,KAAKuC,OAASpB,EAAAA,EAAOiB,kBAAkBpC,KAAKiF,cAC5CjF,KAAKoE,MAAQpE,KAAKsF,YACpB,G,QCzCF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,sRCRExB,EAAAA,EAAAA,IAsCM,aArCJQ,EAAAA,EAAAA,GAWM,aARJP,EAAAA,EAAAA,IAOSwB,EAAA,M,kBANP,IAIC,EAJDxB,EAAAA,EAAAA,IAICyB,EAAA,CAJQC,KAAM,GAAC,C,kBACd,IAEC,EAFD1B,EAAAA,EAAAA,IAEC2B,EAAA,CAFUX,KAAK,UAAWY,QAAOC,EAAAC,c,mBAC/B,IAAE,UAAF,S,8BAGL9B,EAAAA,EAAAA,IAAuDyB,EAAA,CAA9CC,KAAM,EAAIK,OAAQ,I,mBAAI,IAAe,mBAAZF,EAAAG,WAAS,M,kBAG/ChC,EAAAA,EAAAA,IAAyBiC,KAAA,aACzBlC,EAAAA,EAAAA,IAYMmC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAZehC,EAAAiC,aAATC,K,WAAZtC,EAAAA,EAAAA,IAYM,OAZ6BuC,IAAKD,EAAMrG,O,EAE5CgE,EAAAA,EAAAA,IAKSwB,EAAA,M,kBAJP,IAEW,EAFXxB,EAAAA,EAAAA,IAEWyB,EAAA,CAFFC,KAAM,GAAC,C,kBACb,IACD,CAD8CvB,EAAAiC,YAAYvF,OAAS,IAAH,WAA/D0F,EAAAA,EAAAA,IACDC,EAAA,C,MADczB,aAAcsB,EAAMpG,M,yDAEpC+D,EAAAA,EAAAA,IAA0DyB,EAAA,CAAjDC,KAAM,EAAIK,OAAQ,I,mBAAI,IAAkB,mBAAfM,EAAM/F,QAAM,M,0BAGhD0D,EAAAA,EAAAA,IAAyBiC,IACzB1B,EAAAA,EAAAA,GAA8C,OAAzCkC,UAAQZ,EAAAa,WAAWL,EAAMhG,U,WAC9B2D,EAAAA,EAAAA,IAAyBiC,Q,OAE3B1B,EAAAA,EAAAA,GAUM,YAJIsB,EAAAc,iBAAY,WAJpBJ,EAAAA,EAAAA,IAMCZ,EAAA,C,MALCX,KAAK,UACJY,QAAOC,EAAAQ,MACRhC,KAAK,S,mBAEJ,IAAE,UAAF,S,sCAEHL,EAAAA,EAAAA,IAAqE2B,EAAA,CAA1DX,KAAK,UAAWY,QAAOC,EAAAe,OAAQvC,KAAK,S,mBAAQ,IAAE,UAAF,S,4EAU7D,GACElC,KAAM,cACNwC,WAAY,CACVkC,WAAUA,EAAAA,YAEZhC,IAAAA,GACE,MAAO,CACLuB,YAAa,GACblF,cAAeD,EAAAA,EAAOC,cAE1B,EACA4D,MAAO,CACLpD,YAAa,CACXsD,KAAMC,OACN6B,UAAU,IAGdC,SAAU,CACRC,WAAAA,GACE,OAAO5H,EAAAA,EAAQwE,mBAAmB9D,KAAK4B,YACzC,EACAsE,SAAAA,GACE,OAAO5G,EAAAA,EAAQ0D,+BAA+BhD,KAAK4B,YACrD,EACAuF,EAAAA,GACE,OAAO7H,EAAAA,EAAQuD,2BAA2B7C,KAAK4B,YACjD,GAEFyD,QAAS,CACP+B,QAAAA,GACEpH,KAAKsG,YAActG,KAAKkH,WAC1B,EACAG,KAAAA,GACEC,QAAQC,IAAIvH,KAAKkH,aACjBI,QAAQC,IAAIvH,KAAKwH,gBACnB,EACAjB,KAAAA,GACEvG,KAAKyH,MAAM,QACb,EACAX,MAAAA,GACE9G,KAAKyH,MAAM,SACb,EACA3E,aAAAA,GACE4E,EAAAA,EAAaC,QAAQ,YAAa,KAAM,CACtCC,kBAAmB,IACnBC,iBAAkB,MAClB3C,KAAM,YACL4C,MAAK,MACNC,EAAAA,EAAAA,IAAU,CACR7C,KAAM,OACN8C,QAAS,YAEXhI,KAAKyH,MAAM,gBAAgB,GAE/B,EACAzB,YAAAA,GACEhG,KAAKyH,MAAM,eACb,EAGAb,UAAAA,CAAWrG,GACT,IAAI0H,EAAO1H,EACPL,EAAQ+H,EAAK7E,QAAQ,gBAIzB,OAHe,IAAXlD,IACF+H,EAAOA,EAAKC,UAAU,EAAGhI,IAEpB+H,CACT,EACAE,QAAAA,CAASjI,GACP,OAAOiF,OAAO7F,EAAAA,EAAQuD,2BAA2B3C,GAAOC,KAC1D,EACA0G,YAAAA,GACE,OACE7G,KAAKsG,YAAYvF,OAAS,GAC1Bf,KAAKsG,YAAYtG,KAAKsG,YAAYvF,OAAS,GAAGZ,OAC5CH,KAAKoB,aAEX,GAEFmE,OAAAA,GACEvF,KAAKoH,UACP,G,QCzHF,MAAM5B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://vue-projectver2/./src/components/composables/Message.js","webpack://vue-projectver2/./src/components/common/userAvatar.vue","webpack://vue-projectver2/./src/components/common/userAvatar.vue?b1a6","webpack://vue-projectver2/./src/components/private/ShowReplyGroup.vue","webpack://vue-projectver2/./src/components/private/ShowReplyGroup.vue?ca19"],"sourcesContent":["import { shallowReactive } from \"vue\";\r\nimport moment from \"moment\";\r\nimport { Member } from \"./Member\";\r\nimport { Alarm } from \"./Alarm\";\r\n\r\nexport const Message = shallowReactive({\r\n  List: localStorage.getItem(\"messageList\")\r\n    ? JSON.parse(localStorage.getItem(\"messageList\"))\r\n    : [],\r\n  refreshList() {\r\n    localStorage.setItem(\"messageList\", JSON.stringify(this.List));\r\n    this.List = JSON.parse(localStorage.getItem(\"messageList\"));\r\n  },\r\n  template: {\r\n    index: \"\",\r\n    from: \"\",\r\n    to: \"\",\r\n    reference: \"\",\r\n    title: \"\",\r\n    content: \"\",\r\n    update: moment().format(\"YYYY-MM-DD\"),\r\n    status: true, // true: 존재하는 메세지 false: 삭제된 메세지\r\n    read: false, // true: 읽은 메세지 false: 읽지 않은 메세지\r\n  },\r\n  createMessage(protoItem) {\r\n    if (protoItem.to.length > 1) {\r\n      protoItem.to.forEach((el) => {\r\n        const item = {\r\n          index: this.List.length,\r\n          from: Member.currentMember,\r\n          to: el,\r\n          reference:\r\n            protoItem.reference === \"\"\r\n              ? []\r\n              : Array.isArray(protoItem.reference)\r\n              ? protoItem.reference\r\n              : [protoItem.reference],\r\n          title: protoItem.title,\r\n          content: protoItem.content,\r\n          update: moment().format(\"YYYY-MM-DD\"),\r\n          status: true,\r\n          read: false,\r\n        };\r\n        Alarm.createAlarm(\"messageSend\", item.from, item.to);\r\n        this.List.push(item);\r\n      });\r\n      this.refreshList();\r\n      return;\r\n    }\r\n    const item = {\r\n      index: this.List.length,\r\n      from: Member.currentMember,\r\n      to: protoItem.to,\r\n      reference:\r\n        protoItem.reference === \"\"\r\n          ? []\r\n          : Array.isArray(protoItem.reference)\r\n          ? protoItem.reference\r\n          : [protoItem.reference],\r\n      title: protoItem.title,\r\n      content: protoItem.content,\r\n      update: moment().format(\"YYYY-MM-DD\"),\r\n      status: true,\r\n    };\r\n    this.List.push(item);\r\n    Alarm.createAlarm(\"messageSend\", item.from, item.to);\r\n    this.refreshList();\r\n  },\r\n  editMessage(protoMessage, parentIndex, replyCheck = false) {\r\n    const newMessage = {\r\n      index: this.List.length,\r\n      from: Member.currentMember,\r\n      to: protoMessage.to,\r\n      reference:\r\n        protoMessage.reference === \"\"\r\n          ? []\r\n          : Array.isArray(protoMessage.reference)\r\n          ? protoMessage.reference\r\n          : [protoMessage.reference],\r\n      title: protoMessage.title,\r\n      content: protoMessage.content,\r\n      update: moment().format(\"YYYY-MM-DD\"),\r\n      status: true,\r\n      read: false,\r\n    };\r\n    if (replyCheck) {\r\n      this.filterReplyMessageGroupReply(parentIndex).length > 0\r\n        ? this.addReplyMessageGroup(parentIndex, newMessage.index)\r\n        : this.createReplyMessageGroup(parentIndex, newMessage.index);\r\n    }\r\n    this.List.push(newMessage);\r\n    Alarm.createAlarm(\"messageSend\", newMessage.from, newMessage.to);\r\n    this.refreshList();\r\n  },\r\n  getAllList() {\r\n    let result = [];\r\n    this.List.forEach((el) => {\r\n      if (el.status) {\r\n        let reference = \"\";\r\n        if (el.reference) {\r\n          el.reference.forEach((el) => {\r\n            reference += Member.findMemberByIndex(el).name + \" ,\";\r\n          });\r\n        } else {\r\n          reference = [];\r\n        }\r\n        result.push({\r\n          index: el.index,\r\n          from: Member.findMemberByIndex(el.from).name,\r\n          to: Member.findMemberByIndex(el.to).name,\r\n          reference: reference,\r\n          title: el.title,\r\n          content: el.content,\r\n          update: el.update,\r\n          status: el.status,\r\n          read: el.read,\r\n        });\r\n      }\r\n    });\r\n    return result;\r\n  },\r\n  getMessage(member) {\r\n    const memberName = Member.findMemberByIndex(member).name;\r\n    return this.getAllList().filter(\r\n      (el) => el.to === memberName || el.reference.includes(memberName)\r\n    );\r\n  },\r\n  findMessageByIndex(index) {\r\n    return this.getAllList().find((el) => el.index === index);\r\n  },\r\n  findOriginalMessageByIndex(index) {\r\n    return this.List.find((el) => el.index === index);\r\n  },\r\n  deleteMessage(index) {\r\n    const target = this.findMessageByIndex(index);\r\n    target.status = false;\r\n    this.refreshList();\r\n  },\r\n  calculateMessageCountByMessage(index) {\r\n    const target = this.List.find((el) => el.index === index);\r\n    const targetMember = target.to;\r\n    const targetAllMessage = this.List.filter((el) => el.to === targetMember);\r\n    const targetmessage = targetAllMessage.find((el) => el.index === index);\r\n    return `${targetAllMessage.indexOf(targetmessage) + 1}/${\r\n      targetAllMessage.length\r\n    }`;\r\n  },\r\n  referenceCheck(index) {\r\n    const target = this.List.find((el) => el.index === index);\r\n    return target.to === Member.currentMember;\r\n  },\r\n  readMessage(index) {\r\n    const target = this.List.find((el) => el.index === index);\r\n    target.read = true;\r\n    this.refreshList();\r\n  },\r\n  // 아래 코드는 메시지가 답장을 통해서 생성되었을때, 원본과 답장을 그룹화하여 차후 메시지 보기를 할때 원본과 답장을 함께 보여주기 위한 코드입니다.\r\n  ReplyMessageGroup: localStorage.getItem(\"replyMessageGroup\")\r\n    ? JSON.parse(localStorage.getItem(\"replyMessageGroup\"))\r\n    : [],\r\n  refreshGroup() {\r\n    localStorage.setItem(\r\n      \"replyMessageGroup\",\r\n      JSON.stringify(this.ReplyMessageGroup)\r\n    );\r\n    this.ReplyMessageGroup = JSON.parse(\r\n      localStorage.getItem(\"replyMessageGroup\")\r\n    );\r\n  },\r\n  createReplyMessageGroup(originalMessage, replyMessage) {\r\n    const group = {\r\n      index: this.ReplyMessageGroup.length,\r\n      originalMessage: originalMessage,\r\n      replyMessage: [replyMessage],\r\n      status: true,\r\n    };\r\n    this.ReplyMessageGroup.push(group);\r\n    this.refreshGroup();\r\n  },\r\n  addReplyMessageGroup(originalMessage, replyMessage) {\r\n    let target = this.findGroupByOGIndex(originalMessage);\r\n    if (target === undefined) {\r\n      target = this.filterReplyMessageGroupReply(originalMessage)[0];\r\n    }\r\n    target.replyMessage.push(replyMessage);\r\n    this.refreshGroup();\r\n  },\r\n  findGroupByOGIndex(index) {\r\n    return this.ReplyMessageGroup.find((el) => el.originalMessage === index);\r\n  },\r\n  filterReplyMessageGroupReply(index) {\r\n    return this.ReplyMessageGroup.filter((el) =>\r\n      el.replyMessage.includes(index)\r\n    );\r\n  },\r\n  getReplyChainArray(unknownIndex) {\r\n    const result = [];\r\n    if (this.findGroupByOGIndex(unknownIndex)) {\r\n      const target = this.findGroupByOGIndex(unknownIndex);\r\n      result.push(this.findOriginalMessageByIndex(target.originalMessage));\r\n      target.replyMessage.forEach((el) => {\r\n        result.push(this.findOriginalMessageByIndex(el));\r\n      });\r\n      return result;\r\n    } else if (this.filterReplyMessageGroupReply(unknownIndex).length > 0) {\r\n      const target = this.filterReplyMessageGroupReply(unknownIndex);\r\n      target.forEach((el) => {\r\n        result.push(this.findOriginalMessageByIndex(el.originalMessage));\r\n        el.replyMessage.forEach((el) => {\r\n          result.push(this.findOriginalMessageByIndex(el));\r\n        });\r\n      });\r\n      return result;\r\n    } else {\r\n      return result;\r\n    }\r\n  },\r\n});\r\n","<template lang=\"\">\r\n  <div>\r\n    <el-avatar :color=\"color\" :background-color=\"color\">\r\n      <el-icon :color=\"color\" :size=\"size\"><UserFilled /></el-icon>\r\n    </el-avatar>\r\n    <span class=\"nameTab\">{{ member.name }}({{ member.department }})</span>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { UserFilled } from \"@element-plus/icons-vue\";\r\nimport { Member } from \"@/components/composables/Member\";\r\nexport default {\r\n  name: \"userAvatar\",\r\n  components: {\r\n    UserFilled,\r\n  },\r\n  data() {\r\n    return {\r\n      size: \"large\",\r\n      member: {},\r\n      color: \"\",\r\n    };\r\n  },\r\n  props: {\r\n    parentMember: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n  },\r\n  methods: {\r\n    colorCheck() {\r\n      switch (this.member.department) {\r\n        case \"기획\":\r\n          return \"#409EFF\";\r\n        case \"개발\":\r\n          return \"#67C23A\";\r\n        case \"디자인\":\r\n          return \"#E6A23C\";\r\n        case \"기타\":\r\n          return \"#F56C6C\";\r\n        default:\r\n          return \"#909399\";\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.member = Member.findMemberByIndex(this.parentMember);\r\n    this.color = this.colorCheck();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.el-avatar {\r\n  --el-avatar-bg-color: var(--el-color-primary-light-9);\r\n}\r\n.nameTab {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import { render } from \"./userAvatar.vue?vue&type=template&id=5cbeb6c0&scoped=true&lang=true\"\nimport script from \"./userAvatar.vue?vue&type=script&lang=js\"\nexport * from \"./userAvatar.vue?vue&type=script&lang=js\"\n\nimport \"./userAvatar.vue?vue&type=style&index=0&id=5cbeb6c0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5cbeb6c0\"]])\n\nexport default __exports__","<template lang=\"\">\r\n  <div>\r\n    <div>\r\n      <!-- 해당 div는 각종 작업을 할 버튼들이 들어감. 해당 topbar는 고정 -->\r\n      <!-- 뒤로가기(목록), 삭제, 오른쪽에는 자신에게 온 Message중에서 이게 몇번째인지 -->\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-button type=\"primary\" @click=\"returnToMain\"\r\n            >목록</el-button\r\n          ></el-col\r\n        >\r\n        <el-col :span=\"4\" :offset=\"12\">{{ tempWhere }}</el-col>\r\n      </el-row>\r\n    </div>\r\n    <el-divider></el-divider>\r\n    <div v-for=\"reply in entireChain\" :key=\"reply.index\">\r\n      <!-- from아바타, from, 보낸시각(update), dropdown(답장,전달) -->\r\n      <el-row>\r\n        <el-col :span=\"4\"\r\n          ><userAvatar :parentMember=\"reply.from\" v-if=\"entireChain.length > 0\"\r\n        /></el-col>\r\n        <el-col :span=\"4\" :offset=\"16\">{{ reply.update }}</el-col>\r\n      </el-row>\r\n      <!-- 내용 -->\r\n      <el-divider></el-divider>\r\n      <div v-html=\"cutContent(reply.content)\"></div>\r\n      <el-divider></el-divider>\r\n    </div>\r\n    <div>\r\n      <!-- 답장(본인일경우), 전달 큰 버튼 -->\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"reply\"\r\n        size=\"large\"\r\n        v-if=\"lastWhoCheck()\"\r\n        >답장</el-button\r\n      >\r\n      <el-button type=\"primary\" @click=\"resend\" size=\"large\">전달</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Message } from \"@/components/composables/Message\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport userAvatar from \"@/components/common/userAvatar.vue\";\r\nimport { Member } from \"@/components/composables/Member\";\r\n\r\nexport default {\r\n  name: \"ShowMessage\",\r\n  components: {\r\n    userAvatar,\r\n  },\r\n  data() {\r\n    return {\r\n      entireChain: [],\r\n      currentMember: Member.currentMember,\r\n    };\r\n  },\r\n  props: {\r\n    parentIndex: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  computed: {\r\n    messageData() {\r\n      return Message.getReplyChainArray(this.parentIndex);\r\n    },\r\n    tempWhere() {\r\n      return Message.calculateMessageCountByMessage(this.parentIndex);\r\n    },\r\n    OG() {\r\n      return Message.findOriginalMessageByIndex(this.parentIndex);\r\n    },\r\n  },\r\n  methods: {\r\n    pageInit() {\r\n      this.entireChain = this.messageData;\r\n    },\r\n    debug() {\r\n      console.log(this.messageData);\r\n      console.log(this.descriptionData);\r\n    },\r\n    reply() {\r\n      this.$emit(\"reply\");\r\n    },\r\n    resend() {\r\n      this.$emit(\"resend\");\r\n    },\r\n    deleteMessage() {\r\n      ElMessageBox.confirm(\"삭제하시겠습니까?\", \"경고\", {\r\n        confirmButtonText: \"예\",\r\n        cancelButtonText: \"아니오\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        ElMessage({\r\n          type: \"info\",\r\n          message: \"삭제되었습니다\",\r\n        });\r\n        this.$emit(\"deleteMessage\");\r\n      });\r\n    },\r\n    returnToMain() {\r\n      this.$emit(\"returnToMain\");\r\n    },\r\n    // content의 내용을 기본 this.content과 비교해서 <p>=========</p>이하 내용을 모두 제거하기\r\n    // 이후 남은 내용을 return\r\n    cutContent(content) {\r\n      let temp = content;\r\n      let index = temp.indexOf(\"<p>=========\");\r\n      if (index !== -1) {\r\n        temp = temp.substring(0, index);\r\n      }\r\n      return temp;\r\n    },\r\n    checkWho(index) {\r\n      return Number(Message.findOriginalMessageByIndex(index).from);\r\n    },\r\n    lastWhoCheck() {\r\n      return (\r\n        this.entireChain.length > 0 &&\r\n        this.entireChain[this.entireChain.length - 1].from !==\r\n          this.currentMember\r\n      );\r\n    },\r\n  },\r\n  mounted() {\r\n    this.pageInit();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.bigSize {\r\n  margin-top: 20px;\r\n  padding: 10px;\r\n}\r\n.messageTitle {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./ShowReplyGroup.vue?vue&type=template&id=3e491f8e&scoped=true&lang=true\"\nimport script from \"./ShowReplyGroup.vue?vue&type=script&lang=js\"\nexport * from \"./ShowReplyGroup.vue?vue&type=script&lang=js\"\n\nimport \"./ShowReplyGroup.vue?vue&type=style&index=0&id=3e491f8e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3e491f8e\"]])\n\nexport default __exports__"],"names":["Message","shallowReactive","List","localStorage","getItem","JSON","parse","refreshList","setItem","stringify","this","template","index","from","to","reference","title","content","update","moment","format","status","read","createMessage","protoItem","length","forEach","el","item","Member","currentMember","Array","isArray","Alarm","createAlarm","push","editMessage","protoMessage","parentIndex","replyCheck","newMessage","filterReplyMessageGroupReply","addReplyMessageGroup","createReplyMessageGroup","getAllList","result","findMemberByIndex","name","getMessage","member","memberName","filter","includes","findMessageByIndex","find","findOriginalMessageByIndex","deleteMessage","target","calculateMessageCountByMessage","targetMember","targetAllMessage","targetmessage","indexOf","referenceCheck","readMessage","ReplyMessageGroup","refreshGroup","originalMessage","replyMessage","group","findGroupByOGIndex","undefined","getReplyChainArray","unknownIndex","class","_createElementBlock","_createVNode","_component_el_avatar","color","$data","_component_el_icon","size","_component_UserFilled","_createElementVNode","_hoisted_1","_toDisplayString","department","components","UserFilled","data","props","parentMember","type","Number","default","methods","colorCheck","mounted","__exports__","render","_component_el_row","_component_el_col","span","_component_el_button","onClick","$options","returnToMain","offset","tempWhere","_component_el_divider","_Fragment","_renderList","entireChain","reply","key","_createBlock","_component_userAvatar","innerHTML","cutContent","lastWhoCheck","resend","userAvatar","required","computed","messageData","OG","pageInit","debug","console","log","descriptionData","$emit","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","ElMessage","message","temp","substring","checkWho"],"sourceRoot":""}