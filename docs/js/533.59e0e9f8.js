"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[533,283,599],{1533:function(e,t,l){l.r(t),l.d(t,{default:function(){return A}});var r=l(3396);const a=e=>((0,r.dD)("data-v-731b365b"),e=e(),(0,r.Cn)(),e),n={class:"borderBox"},i={class:"rightSideButtons"},o={class:"rightSideButtons"},s=a((()=>(0,r._)("div",{class:"clearfix"},[(0,r._)("span",null,"조직도")],-1))),p=a((()=>(0,r._)("div",{class:"clearfix"},[(0,r._)("span",null,"결재라인")],-1))),c={class:"CenterButtons"};function d(e,t,l,a,d,h){const u=(0,r.up)("el-option"),m=(0,r.up)("el-select"),v=(0,r.up)("el-button"),f=(0,r.up)("ArrowUpBold"),k=(0,r.up)("el-icon"),C=(0,r.up)("ArrowDownBold"),w=(0,r.up)("memberTree"),L=(0,r.up)("el-card"),g=(0,r.up)("el-col"),A=(0,r.up)("ArrowLeftBold"),y=(0,r.up)("ArrowRightBold"),b=(0,r.up)("el-table-column"),S=(0,r.up)("el-table"),_=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",i,[(0,r.Wm)(m,{modelValue:d.ApprovalLineName,"onUpdate:modelValue":t[0]||(t[0]=e=>d.ApprovalLineName=e),placeholder:"자주 쓰는 결재라인"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.selectMenu,(e=>((0,r.wg)(),(0,r.j4)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,r.Wm)(v,{type:"primary",onClick:h.loadMenu},{default:(0,r.w5)((()=>[(0,r.Uk)("불러오기")])),_:1},8,["onClick"])]),(0,r._)("div",o,[(0,r.Wm)(v,{type:"primary",onClick:h.changeUp},{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f)])),_:1})])),_:1},8,["onClick"]),(0,r.Wm)(v,{type:"primary",onClick:h.changeDown},{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C)])),_:1})])),_:1},8,["onClick"]),(0,r.Wm)(v,{type:"primary",onClick:h.clearAll},{default:(0,r.w5)((()=>[(0,r.Uk)("초기화")])),_:1},8,["onClick"]),(0,r.Wm)(v,{type:"primary",onClick:h.saveLine},{default:(0,r.w5)((()=>[(0,r.Uk)("결재라인 저장")])),_:1},8,["onClick"])]),(0,r.Wm)(_,{class:"card-box"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(L,{shadow:"never",class:"card-box-1"},{header:(0,r.w5)((()=>[s])),default:(0,r.w5)((()=>[(0,r.Wm)(w,{onOnNodeClick:h.checkedTable,ref:"memberT",currentCheck:d.Checked},null,8,["onOnNodeClick","currentCheck"])])),_:1})])),_:1}),(0,r.Wm)(g,{span:8,class:"CenterButtons"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{type:"primary",onClick:h.removeLine},{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(A)])),_:1})])),_:1},8,["onClick"]),(0,r.Wm)(v,{type:"primary",onClick:h.addLine},{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y)])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,r.Wm)(g,{span:10},{default:(0,r.w5)((()=>[(0,r.Wm)(L,{shadow:"never"},{header:(0,r.w5)((()=>[p])),default:(0,r.w5)((()=>[(0,r.Wm)(S,{ref:"table",data:d.ApprovalLine,onCurrentChange:h.handleSelect,"highlight-current-row":"","table-layout":"fixed"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{type:"index",label:""}),(0,r.Wm)(b,{prop:"name",label:"이름"}),(0,r.Wm)(b,{prop:"rank",label:"직급"})])),_:1},8,["data","onCurrentChange"])])),_:1})])),_:1})])),_:1}),(0,r._)("div",c,[(0,r.Wm)(v,{type:"primary",onClick:h.saveEmit},{default:(0,r.w5)((()=>[(0,r.Uk)("저장")])),_:1},8,["onClick"])])])}l(560);var h=l(2748),u=l(3283),m=l(4870),v=l(167);const f=(0,m.qj)({SavedLines:localStorage.getItem("approvalLine")?JSON.parse(localStorage.getItem("approvalLine")):[],template:{index:"",name:"",lines:[]},saveLine(e,t){let l=[];e.forEach((e=>{l.push(e.index)}));const r={index:this.SavedLines.length,name:t,lines:l};this.SavedLines.push(r),localStorage.setItem("approvalLine",JSON.stringify(this.SavedLines))},callLine(e){let t=[];const l=this.SavedLines.find((t=>t.index===e));return l.lines.forEach((e=>{t.push(v.N.findMemberByIndex(e))})),t},callSelectMenu(){let e=[];return this.SavedLines.forEach((t=>{e.push({value:t.index,label:t.name})})),e}});var k=l(6e3),C=l(7178),w={name:"CreateApprovalLine",emits:["approvalLine"],components:{memberTree:u["default"],ArrowDownBold:h.RqY,ArrowUpBold:h.S9J,ArrowLeftBold:h.nt8,ArrowRightBold:h.Vtw},props:{parentData:{type:Array,default:()=>[]}},data(){return{Checked:[],ApprovalLine:[],ApprovalLineName:"",Select:[]}},methods:{checkedTable(e){this.Checked=[],this.clearSelect(),this.Checked.push(e)},handleSelect(e){null!==e?(this.Checked=[],this.Select=[e]):this.Select=[]},changeUp(){if(0===this.Select.length)return void this.showErrorMessage();let e=this.ApprovalLine.indexOf(this.Select[0]);if(e>0){let t=this.ApprovalLine[e];this.ApprovalLine[e]=this.ApprovalLine[e-1],this.ApprovalLine[e-1]=t}},changeDown(){if(0===this.Select.length)return void this.showErrorMessage();let e=this.ApprovalLine.indexOf(this.Select[0]);if(e<this.ApprovalLine.length-1){let t=this.ApprovalLine[e];this.ApprovalLine[e]=this.ApprovalLine[e+1],this.ApprovalLine[e+1]=t}},addLine(){0!==this.Checked.length?this.ApprovalLine.filter((e=>e.index===this.Checked[0].index)).length>0||(this.ApprovalLine.push(this.Checked[0]),this.Checked=[],this.$refs.memberT.clearHighlight()):this.showErrorMessage()},removeLine(){if(0===this.Select.length)return void this.showErrorMessage();let e=this.ApprovalLine.indexOf(this.Select[0]);e>-1&&this.ApprovalLine.splice(e,1),this.clearSelect()},clearSelect(){this.Select=[],this.$refs.table.setCurrentRow()},clearAll(){this.ApprovalLine=[],this.clearSelect()},saveLine(){k.T.prompt("결재라인 이름을 입력하세요","결재라인 저장",{confirmButtonText:"저장",cancelButtonText:"취소",inputPattern:/\S/,inputErrorMessage:"결재라인 이름을 입력하세요"}).then((({value:e})=>{f.saveLine(this.ApprovalLine,e),this.$forceUpdate()})).catch((()=>{(0,C.z8)({type:"info",message:"취소되었습니다"})}))},showErrorMessage(){(0,C.z8)({type:"error",message:"잘못된 접근입니다"})},loadMenu(){""!==this.ApprovalLineName?this.ApprovalLine=f.callLine(this.ApprovalLineName):this.showErrorMessage()},saveEmit(){const e=[];this.ApprovalLine.forEach((t=>{e.push({index:t.index,order:this.ApprovalLine.indexOf(t)})})),this.$emit("approvalLine",e)}},computed:{selectMenu(){return f.callSelectMenu()}},mounted(){if(this.parentData&&this.parentData.length>0){const e=[];this.parentData.forEach((t=>{e.push(v.N.findMemberByIndex(t.index))})),this.ApprovalLine=e}}},L=l(89);const g=(0,L.Z)(w,[["render",d],["__scopeId","data-v-731b365b"]]);var A=g},3283:function(e,t,l){l.r(t),l.d(t,{default:function(){return p}});var r=l(3396);function a(e,t,l,a,n,i){const o=(0,r.up)("el-tree"),s=(0,r.up)("el-card");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(s,{shadow:"never"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{ref:"tree",data:i.memberData,onNodeClick:i.onNodeClick,"node-key":"key"},null,8,["data","onNodeClick"])])),_:1})])}var n=l(167),i={name:"MemberTree",emits:["onNodeClick"],data(){return{checked:[],indeterminate:[]}},props:{currentCheck:{type:Array,default:()=>[]}},computed:{memberData(){return n.N.CallTeamTree()},isClear(){return void 0!==this.currentCheck[0]&&this.$refs.tree.getCurrentKey()===this.currentCheck[0].index}},methods:{onNodeClick(e){e.children||(this.$refs.tree.setCurrentKey(e.key),this.$emit("onNodeClick",n.N.findMemberByIndex(e.key)))},clearHighlight(){this.isClear||this.$refs.tree.setCurrentkey([],!1)}}},o=l(89);const s=(0,o.Z)(i,[["render",a]]);var p=s}}]);
//# sourceMappingURL=533.59e0e9f8.js.map