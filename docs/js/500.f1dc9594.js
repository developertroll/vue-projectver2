"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[500],{6780:function(t,e,r){r.d(e,{_:function(){return d}});r(560);var i=r(4870),a=r(6797),s=r.n(a),n=r(7400),o=r(2760),l=r(8865),p=r(167);const d=(0,i.Um)({List:localStorage.getItem("approvalList")?JSON.parse(localStorage.getItem("approvalList")):[],template:{index:"",parentIdx:"",parentType:"",update:"",master:"",status:"",writer:""},createApproval(t){if(t.ApprovalLine.length>1)for(let e=0;e<t.ApprovalLine.length;e++){if(0===e){const r={index:this.List.length,parentIdx:t.index,parentType:"project",title:t.title,master:t.ApprovalLine[e].index,status:"결재요청",writer:t.master,update:s()().format("YYYY-MM-DD")};this.List.push(r),l.j.createAlarm("approvalRequest",r.writer,r.master);continue}const r={index:this.List.length,parentIdx:t.index,parentType:"project",title:t.title,master:t.ApprovalLine[e].index,status:"대기",writer:t.ApprovalLine[e-1].index,update:s()().format("YYYY-MM-DD")};this.List.push(r)}else{const e={index:this.List.length,parentIdx:t.index,parentType:"project",title:t.title,master:t.ApprovalLine[0].index,status:"결재요청",writer:t.master,update:s()().format("YYYY-MM-DD")};this.List.push(e)}localStorage.setItem("approvalList",JSON.stringify(this.List))},finishApproval(t){try{const e=this.List.find((e=>e.index===t));if(e.status="결재완료",l.j.createAlarm("approvalApproved",e.master,e.writer),void 0!==this.List.find((t=>e.master===t.writer&&t.parentIdx===e.parentIdx&&t.index!==e.index&&e.index<t.index&&"대기"===t.status))){const t=this.List.find((t=>e.master===t.writer&&t.parentIdx===e.parentIdx&&t.index!==e.index&&e.index<t.index&&"대기"===t.status));t.status="결재요청",t.update=s()().format("YYYY-MM-DD"),l.j.createAlarm("approvalRequest",t.writer,t.master)}else switch(e.parentType){case"project":{let t=n.I.findProjectByIndex(e.parentIdx);t.status="진행",o.m.createWork(t),l.j.createAlarm("projectApproved",e.master,t.master),localStorage.setItem("projectList",JSON.stringify(n.I.List));break}case"work":o.m.finishWork(e.parentIdx,e.desc,e.etc),l.j.createAlarm("workApproved",e.master,e.writer);break;default:console.log("error");break}localStorage.setItem("approvalList",JSON.stringify(this.List)),this.List=JSON.parse(localStorage.getItem("approvalList"))}catch(e){console.log(e)}},callApprovalList(t){return"대기"===t?this.List.filter((e=>e.status===t&&(e.master===p.N.currentMember||e.writer===p.N.currentMember))):this.List.filter((e=>e.status===t&&e.master===p.N.currentMember))},callAllList(){return this.List},findApprovalByIndex(t){return this.List.find((e=>e.index===t&&e.master===p.N.currentMember))},findparentProjectIndexByIndex(t){return this.List.find((e=>e.index===t)).parentIdx},rejectApproval(t){const e=this.List.find((e=>e.index===t));switch(e.parentType){case"project":{let t=n.I.findProjectByIndex(e.parentIdx);t.status="반려",l.j.createAlarm("approvalRejected",e.master,t.master),localStorage.setItem("projectList",JSON.stringify(n.I.List));break}case"work":{let t=o.m.getOriginalWorkByIndex(e.parentIdx);t.status="진행",l.j.createAlarm("workRejected",e.master,t.member),o.m.refreshWorkList();break}default:console.log("error");break}const r=this.List.filter((t=>t.parentIdx===e.parentIdx&&t.index>e.index&&"대기"===t.status));r.forEach((t=>{this.List.splice(this.List.indexOf(t),1)})),this.List.splice(this.List.indexOf(e),1),this.List.forEach(((t,e)=>{t.index=e})),localStorage.setItem("approvalList",JSON.stringify(this.List)),this.List=JSON.parse(localStorage.getItem("approvalList"))},createWorkApproval(t){try{const e=o.m.getWorkByIndex(t[0].index);o.m.getOriginalWorkByIndex(t[0].index).status="결재요청";const r={index:this.List.length,parentIdx:e.index,parentType:"work",title:`${e.member}의 ${e.detail}`,master:e.master,status:"결재요청",writer:e.member,update:s()().format("YYYY-MM-DD"),desc:t[0].desc,etc:t[0].etc};this.List.push(r),o.m.refreshWorkList(),localStorage.setItem("approvalList",JSON.stringify(this.List)),this.List=JSON.parse(localStorage.getItem("approvalList"))}catch(e){console.log(e)}},getStatusByParentIdxMember(t,e){const r=this.List.find((r=>r.parentIdx===t&&r.master===e));return r.status},getApprovalByParentIdx(t){return this.List.filter((e=>e.parentIdx===t))}})},7400:function(t,e,r){r.d(e,{I:function(){return o}});r(560);var i=r(4870),a=r(167),s=r(6780),n=r(8865);const o=(0,i.Um)({List:localStorage.getItem("projectList")?JSON.parse(localStorage.getItem("projectList")):[],refreshList(){localStorage.setItem("projectList",JSON.stringify(this.List)),this.List=JSON.parse(localStorage.getItem("projectList"))},template:{index:"",title:"",desc:"",start_date:"",end_date:"",master:"",member:[],work:[],status:""},createProject(t){const e={...t,index:this.List.length,master:a.N.currentMember,status:"대기"};this.List.push(e),s._.createApproval(e),e.member.forEach((t=>{t!==a.N.currentMember&&n.j.createAlarm("project",a.N.currentMember,t)})),localStorage.setItem("projectList",JSON.stringify(this.List))},EditProject(t,e){const r=this.findProjectByIndex(t),i=Object.assign(r,e);i.status="대기",s._.createApproval(i),localStorage.setItem("projectList",JSON.stringify(this.List))},callProjectList(t){return this.List.filter((e=>e.status===t))},findProjectByIndex(t){return this.List.find((e=>e.index===t))},deleteProject(t){const e=this.findProjectByIndex(t);e.status="삭제",localStorage.setItem("projectList",JSON.stringify(this.List)),this.List=JSON.parse(localStorage.getItem("projectList"))},getProjectByMember(t){return this.List.filter((e=>e.member.includes(t)&&"진행"===e.status))},finishProject(t){const e=this.findProjectByIndex(t);e.status="완료",this.refreshList()},getProjectByMemberAndWork(t,e){return this.List.filter((r=>JSON.stringify(r.member)===JSON.stringify(t)&&JSON.stringify(r.work)===JSON.stringify(e)))}})},2760:function(t,e,r){r.d(e,{m:function(){return l}});r(560);var i=r(4870),a=r(167),s=r(7400),n=r(6797),o=r.n(n);const l=(0,i.Um)({WorkList:localStorage.getItem("workList")?JSON.parse(localStorage.getItem("workList")):[],refreshWorkList(){localStorage.setItem("workList",JSON.stringify(this.WorkList)),this.WorkList=JSON.parse(localStorage.getItem("workList"))},template:{index:"",member:"",master:"",project:"",type:"",deadline:"",update:"",status:"",detail:""},WorkTypeList:[{value:"개발",label:"개발"},{value:"디자인",label:"디자인"},{value:"기획",label:"기획"},{value:"마케팅",label:"마케팅"}],detailWorkTypeList:[{parent:"개발",detailList:["기능 구현","코드 리뷰","테스트","기타"]},{parent:"디자인",detailList:["UI 디자인","UX 디자인","기타"]},{parent:"기획",detailList:["기획","검토","기타"]},{parent:"마케팅",detailList:["영업","홍보","기타"]}],WorkStatusList:[{value:"대기",label:"대기"},{value:"진행",label:"진행"},{value:"완료",label:"완료"},{value:"보류",label:"보류"}],callDetailedWorkByParent(t){let e=[];return this.detailWorkTypeList.forEach((r=>{r.parent===t&&r.detailList.forEach((t=>{e.push({value:t,label:t})}))})),e},indexifyDetail(t){let e="";return this.detailWorkTypeList.forEach((r=>{r.parent===t.department&&r.detailList.forEach(((r,i)=>{r===t.detail&&(e=i)}))})),e},deIndexifyDetailWithMember(t,e){let r="";return this.detailWorkTypeList.forEach((i=>{i.parent===t.department&&i.detailList.forEach(((t,i)=>{i===e&&(r=t)}))})),r},deIndexifyDetailWithType(t,e){let r="";return this.detailWorkTypeList.forEach((i=>{i.parent===t&&i.detailList.forEach(((t,i)=>{i===e&&(r=t)}))})),r},createWork(t){try{t.member.forEach(((e,r)=>{const i={index:this.WorkList.length,member:e,master:t.master,project:t.index,type:a.N.findMemberByIndex(e).department,detail:t.work[r],deadline:t.end_date,update:o()().format("YYYY-MM-DD"),status:"진행"};this.WorkList.push(i)})),localStorage.setItem("workList",JSON.stringify(this.WorkList))}catch(e){console.log(e)}},getWorkByProjectAndMember(t,e){try{const r=this.WorkList.find((r=>r.project===t.index&&r.member===e)),i={...r};return i.detail=this.deIndexifyDetailWithType(i.type,i.detail),i}catch(r){console.log(r)}},getWorkByProject(t){return this.WorkList.filter((e=>e.project===t))},getWorkByIndex(t){try{const e=this.WorkList.find((e=>e.index===t)),r={...e};return r.detail=this.deIndexifyDetailWithType(r.type,r.detail),r.member=a.N.findMemberByIndex(r.member).name,r.master=a.N.findMemberByIndex(r.master).name,r}catch(e){console.log(e)}},getOriginalWorkByIndex(t){return this.WorkList.find((e=>e.index===t))},getAllWorkByProject(t){return this.WorkList.filter((e=>e.project===t))},finishWork(t,e,r){const i=this.getOriginalWorkByIndex(t);i.status="완료",i.desc=e,i.etc=r,void 0===this.getAllWorkByProject(i.project).find((t=>"완료"!==t.status))&&s.I.finishProject(i.project),this.refreshWorkList()},getWorkByMemberAndDetailAndProject(t,e,r){return this.WorkList.find((i=>i.member===t&&i.detail===e&&i.project===r))}})},2985:function(t,e,r){r.r(e),r.d(e,{default:function(){return d}});var i=r(3396);function a(t,e,r,a,s,n){const o=(0,i.up)("el-table-column"),l=(0,i.up)("el-table");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{data:s.tableData,border:""},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{prop:"name",label:"이름"}),(0,i.Wm)(o,{prop:"department",label:"분야"}),(0,i.Wm)(o,{prop:"detail",label:"업무"}),n.approvedCheck?((0,i.wg)(),(0,i.j4)(o,{key:0,prop:"status",label:"상태"})):(0,i.kq)("",!0)])),_:1},8,["data"])])}r(560);var s=r(2760),n=r(167),o={name:"WorkTable",data(){return{tableData:[]}},props:{parentProject:{type:Number,default:null},parentWork:{type:Array,default:()=>[],required:!0},parentMember:{type:Array,default:()=>[],required:!0}},computed:{memberData(){const t=[];return this.parentMember.forEach((e=>{t.push(n.N.findMemberByIndex(e))})),t},approvedCheck(){return s.m.getWorkByProject(this.parentProject).length>0}},methods:{WorkData(){const t=[],e=[];this.memberData.forEach(((r,i)=>{t.push({...r,detail:this.parentWork[i]}),e.push(s.m.getWorkByMemberAndDetailAndProject(this.parentMember[i],this.parentWork[i],this.parentProject)?s.m.getWorkByMemberAndDetailAndProject(this.parentMember[i],this.parentWork[i],this.parentProject).status:null)})),t.forEach(((t,r)=>{this.tableData.push({name:t.name,department:t.department,detail:s.m.deIndexifyDetailWithMember(t,t.detail),referenceIndex:t.index,status:null===this.parentProject?null:e[r]})}))}},mounted(){this.WorkData()}},l=r(89);const p=(0,l.Z)(o,[["render",a]]);var d=p}}]);
//# sourceMappingURL=500.f1dc9594.js.map