"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[697,136,474],{3697:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var r=a(3396),l=a(7139);function n(e,t,a,n,o,i){const p=(0,r.up)("el-table-column"),d=(0,r.up)("showProject"),u=(0,r.up)("generalDescription"),s=(0,r.up)("dialogSlot"),c=(0,r.up)("el-button"),f=(0,r.up)("el-table");return(0,r.wg)(),(0,r.j4)(f,{data:o.tableData},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"index"}),(0,r.Wm)(p,{prop:"type",label:"종류"},{default:(0,r.w5)((e=>[(0,r.Uk)((0,l.zw)(o.translateType[e.row.type]),1)])),_:1}),(0,r.Wm)(p,{prop:"writer",label:"요청자"}),(0,r.Wm)(p,{prop:"update",label:"요청일"}),(0,r.Wm)(p,{prop:"status",label:"상태"}),(0,r.Wm)(p,{label:"상세"},{default:(0,r.w5)((e=>[(0,r.Wm)(s,{title:o.dialogTitle},{default:(0,r.w5)((()=>["project"===e.row.type?((0,r.wg)(),(0,r.j4)(d,{key:0,projectIndex:i.getParentProject(e.row.referenceIndex),isSaved:!0},null,8,["projectIndex"])):"work"===e.row.type?((0,r.wg)(),(0,r.j4)(u,{key:1,parentLabel:o.translateWorkColumn,parentData:i.getParentWork(e.row.referenceIndex)},null,8,["parentLabel","parentData"])):(0,r.kq)("",!0)])),_:2},1032,["title"])])),_:1}),"결재요청"===a.parentStatus?((0,r.wg)(),(0,r.j4)(p,{key:0,label:"작업"},{default:(0,r.w5)((e=>[(0,r._)("div",null,[(0,r.Wm)(c,{type:"success",onClick:t=>i.approve(e.row.referenceIndex)},{default:(0,r.w5)((()=>[(0,r.Uk)("승인")])),_:2},1032,["onClick"]),(0,r.Wm)(c,{type:"danger",onClick:t=>i.reject(e.row.referenceIndex)},{default:(0,r.w5)((()=>[(0,r.Uk)("반려")])),_:2},1032,["onClick"])])])),_:1})):(0,r.kq)("",!0)])),_:1},8,["data"])}a(560);var o=a(4702),i=a(6780),p=a(5837),d=a(167),u=a(2760),s=a(474),c={name:"ApprovalTable",components:{dialogSlot:o["default"],showProject:p["default"],generalDescription:s["default"]},props:{parentStatus:{type:String,default:"결재요청"}},computed:{approvalData(){return i._.callApprovalList(this.parentStatus)}},data(){return{tableData:[],dialogTitle:"상세",translateType:{project:"프로젝트",work:"업무",member:"멤버",plan:"일정"},translateWorkColumn:{member:"작성자",master:"담당자",type:"분야",deadline:"마감일",update:"갱신일",status:"상태",detail:"업무",desc:"설명",etc:"비고"}}},methods:{tableInit(){this.approvalData.forEach((e=>{this.tableData.push({type:e.parentType,writer:isNaN(e.writer)?e.writer:d.N.findMemberByIndex(e.writer).name,update:e.update,status:e.status,referenceIndex:e.index})}))},getParentProject(e){return i._.findparentProjectIndexByIndex(e)},approve(e){i._.finishApproval(e),this.$forceUpdate},reject(e){i._.rejectApproval(e)},getParentWork(e){try{const t=this.getParentProject(e),a=u.m.getWorkByIndex(t),r=i._.findApprovalByIndex(e);Reflect.deleteProperty(a,"index"),Reflect.deleteProperty(a,"project");const l={...a,desc:r.desc,etc:r.etc};return l}catch(t){console.log(t)}}},mounted(){this.tableInit()},watch:{approvalData:{deep:!0,handler(){this.tableData=[],this.tableInit()}}}},f=a(89);const m=(0,f.Z)(c,[["render",n]]);var w=m},4702:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var r=a(3396),l=a(7139);const n={class:"el-header"};function o(e,t,a,o,i,p){const d=(0,r.up)("el-button"),u=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",null,[(0,r.Wm)(d,{type:"primary",onClick:p.openDialog},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(a.title),1)])),_:1},8,["onClick"])]),(0,r.Wm)(u,{modelValue:i.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialogVisible=e),"append-to-body":"","show-close":!1},{header:(0,r.w5)((()=>[(0,r._)("div",n,[(0,r._)("h2",null,(0,l.zw)(a.title),1),(0,r.Wm)(d,{onClick:p.closeDialog},{default:(0,r.w5)((()=>[(0,r.Uk)("닫기")])),_:1},8,["onClick"])])])),default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{onSaveForm:t[0]||(t[0]=(...e)=>p.saveForm&&p.saveForm(...e))})])),_:3},8,["modelValue"])])}var i={name:"dialogSlot",data(){return{dialogVisible:!1}},props:{title:{type:String,default:""}},methods:{openDialog(){this.dialogVisible=!0},closeDialog(){this.dialogVisible=!1},saveForm(e){this.$emit("saveForm",e),this.closeDialog()}}},p=a(89);const d=(0,p.Z)(i,[["render",o]]);var u=d},474:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(3396),l=a(7139);function n(e,t,a,n,o,i){const p=(0,r.up)("el-descriptions-item"),d=(0,r.up)("el-descriptions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(d,{column:1,border:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.description,(e=>((0,r.wg)(),(0,r.j4)(p,{label:e.label,key:e.key},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["label"])))),128))])),_:1})])}a(560);var o={name:"generalDescription",props:{parentData:{type:Object,required:!0},parentLabel:{type:Object,required:!0}},data(){return{desc:[]}},computed:{description(){const e=[],t=Object.entries(this.parentLabel);return t.forEach((t=>{e.push({label:t[1],key:t,value:this.parentData[t[0]]})})),e}}},i=a(89);const p=(0,i.Z)(o,[["render",n]]);var d=p}}]);
//# sourceMappingURL=697.16050972.js.map