"use strict";(self["webpackChunkvue_projectver2"]=self["webpackChunkvue_projectver2"]||[]).push([[613,901],{7296:function(e,t,s){s.d(t,{f:function(){return i}});s(560);var r=s(4870),a=s(167),n=s(6797),o=s.n(n);const i=(0,r.Um)({GroupList:localStorage.getItem("talkGroupList")?JSON.parse(localStorage.getItem("talkGroupList")):[],refreshGroupList(){localStorage.setItem("talkGroupList",JSON.stringify(this.GroupList)),this.GroupList=JSON.parse(localStorage.getItem("talkGroupList"))},MessageList:localStorage.getItem("talkMessageList")?JSON.parse(localStorage.getItem("talkMessageList")):[],refreshMessageList(){localStorage.setItem("talkMessageList",JSON.stringify(this.MessageList)),this.MessageList=JSON.parse(localStorage.getItem("talkMessageList"))},refreshAll(){this.refreshGroupList(),this.refreshMessageList()},MessageTemplate:{index:"",parentGroup:"",owner:"",content:"",update:"",status:!0},GroupTemplate:{index:"",name:"",member:[],message:[],update:"",status:!0},createGroup(e,t){const s={index:this.GroupList.length,name:e,member:t,message:[],update:o()().format("YYYY-MM-DD"),status:!0};this.GroupList.push(s),this.createMessage(s.index,"채팅방이 생성되었습니다"),this.refreshGroupList()},createMessage(e,t){const s={index:this.MessageList.length,parentGroup:e,owner:a.N.currentMember,content:t,update:o()().format("YYYY-MM-DD HH:mm:ss"),status:!0},r=this.findGroupByIndex(e);r.update=s.update,r.message.push(s.index),this.MessageList.push(s),this.refreshAll()},findGroupByIndex(e){return this.GroupList.find((t=>t.index===e))},findMessageByIndex(e){return this.MessageList.find((t=>t.index===e))},findMessageGroupByIndex(e){return this.MessageList.filter((t=>t.parentGroup===e))},findLastMessageByGroupIndex(e){const t=this.findGroupByIndex(e),s=t.message[t.message.length-1];return this.findMessageByIndex(s)},findGroupByMember(e){return this.GroupList.filter((t=>t.member.includes(e)))},getGroupByIndex(e){const t=this.findGroupByIndex(e),s={...t},r=[];return s.member.forEach((e=>{r.push(a.N.findMemberByIndex(e))})),s.member=r,s}})},2372:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var r=s(3396);function a(e,t,s,a,n,o){const i=(0,r.up)("TalkGroupTemplate");return(0,r.wg)(),(0,r.iD)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.sortedGroupData,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.index},[(0,r.Wm)(i,{GroupIndex:e.index,onShowRoom:o.showRoom},null,8,["GroupIndex","onShowRoom"])])))),128))])}var n=s(7296),o=s(167),i=s(2901),u=s(6797),p=s.n(u),m={name:"TalkGroupTable",components:{TalkGroupTemplate:i["default"]},computed:{GroupData(){return n.f.findGroupByMember(o.N.currentMember)}},data(){return{sortedGroupData:[]}},methods:{sortGroup(){return this.GroupData.sort(((e,t)=>p()(t.update).diff(p()(e.update))))},showRoom(e){this.$emit("showRoom",e)}},mounted(){this.sortedGroupData=this.sortGroup()}},l=s(89);const d=(0,l.Z)(m,[["render",a]]);var h=d},2901:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var r=s(3396),a=s(7139);const n={class:"clickHover"},o={class:"greyLetter"};function i(e,t,s,i,u,p){const m=(0,r.up)("User"),l=(0,r.up)("el-icon"),d=(0,r.up)("el-tag"),h=(0,r.up)("el-tooltip"),f=(0,r.up)("el-col"),g=(0,r.up)("el-row"),c=(0,r.up)("el-card");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(c,{onClick:p.showRoom},{header:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Uk)((0,a.zw)(p.GroupData.name)+" ",1),(0,r.Wm)(h,{effect:"dark",content:u.members,placement:"top"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m)])),_:1}),(0,r.Uk)(" "+(0,a.zw)(u.memberNumber),1)])),_:1})])),_:1},8,["content"])])])),default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{span:18},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(u.finalMessage.content),1)])),_:1}),(0,r.Wm)(f,{span:6},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(u.finalUpdate),1)])),_:1})])),_:1})])])),_:1},8,["onClick"])])}var u=s(7296),p=s(167),m=s(2748),l=s(6797),d=s.n(l),h={name:"TalkGroupTemplate",components:{User:m.n5m},props:{GroupIndex:{type:Number,required:!0}},computed:{GroupData(){return u.f.findGroupByIndex(this.GroupIndex)}},data(){return{finalMessage:{},memberNumber:0,members:"",finalUpdate:""}},methods:{pageInit(){this.finalMessage=this.getFinalMessage(this.GroupIndex),this.memberNumber=this.GroupData.member.length,this.members=this.GroupData.member.map((e=>p.N.findMemberByIndex(e).name)).join(", ");const e=d()().format("YYYY-MM-DD HH:mm:ss");d()(this.finalMessage.update).isSame(e,"day")?this.finalUpdate=d()(this.finalMessage.update).format("HH:mm:ss"):this.finalUpdate=d()(this.finalMessage.update).format("YYYY-MM-DD HH:mm:ss")},getFinalMessage(e){try{const t=u.f.findLastMessageByGroupIndex(e);return t}catch(t){console.log(t)}},showRoom(){this.$emit("showRoom",this.GroupIndex)}},mounted(){this.pageInit()}},f=s(89);const g=(0,f.Z)(h,[["render",i]]);var c=g}}]);
//# sourceMappingURL=613.33f8500f.js.map